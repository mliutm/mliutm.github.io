<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>荣车宝-店铺入驻（三） | 清风</title><meta name="author" content="清风"><meta name="copyright" content="清风"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="容车宝-店铺入驻一 简介 店铺入驻需求与业务分析 店铺入驻实现  二 需求与业务流程分析1 认识店铺容车宝的业务模式为：4s店可以在平台来入驻，发布自己的“汽车服务” ， 用户可以选择相关的“汽车服务”进行预约，下单。所以这里的店铺类似于京东，淘宝的“店铺” 。  平台:提供管理系统，进行基础数据管理，店铺管理，用户管理等 店铺:入驻到平台，发布“汽车服务”提供给用户去预约下单 用户:通过门户网站"><meta property="og:type" content="article"><meta property="og:title" content="荣车宝-店铺入驻（三）"><meta property="og:url" content="https://mliutm.github.io/breeze/3119132.html"><meta property="og:site_name" content="清风"><meta property="og:description" content="容车宝-店铺入驻一 简介 店铺入驻需求与业务分析 店铺入驻实现  二 需求与业务流程分析1 认识店铺容车宝的业务模式为：4s店可以在平台来入驻，发布自己的“汽车服务” ， 用户可以选择相关的“汽车服务”进行预约，下单。所以这里的店铺类似于京东，淘宝的“店铺” 。  平台:提供管理系统，进行基础数据管理，店铺管理，用户管理等 店铺:入驻到平台，发布“汽车服务”提供给用户去预约下单 用户:通过门户网站"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mliutm.github.io/img/photo-1653549892896-dde02867edee.jpg"><meta property="article:published_time" content="2023-11-20T12:39:40.000Z"><meta property="article:modified_time" content="2023-11-20T13:14:00.450Z"><meta property="article:author" content="清风"><meta property="article:tag" content="java"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://mliutm.github.io/img/photo-1653549892896-dde02867edee.jpg"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://mliutm.github.io/breeze/3119132.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!1,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"荣车宝-店铺入驻（三）",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-11-20 21:14:00"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">169</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/photo-1653549892896-dde02867edee.jpg)"><nav id="nav"><span id="blog-info"><a href="/" title="清风"><span class="site-name">清风</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">荣车宝-店铺入驻（三）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-20T12:39:40.000Z" title="发表于 2023-11-20 20:39:40">2023-11-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-20T13:14:00.450Z" title="更新于 2023-11-20 21:14:00">2023-11-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/">实战项目</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E8%93%89%E8%BD%A6%E5%AE%9D/">蓉车宝</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="荣车宝-店铺入驻（三）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="容车宝-店铺入驻"><a href="#容车宝-店铺入驻" class="headerlink" title="容车宝-店铺入驻"></a>容车宝-店铺入驻</h1><h2 id="一-简介"><a href="#一-简介" class="headerlink" title="一 简介"></a>一 简介</h2><ul><li>店铺入驻需求与业务分析</li><li>店铺入驻实现</li></ul><h2 id="二-需求与业务流程分析"><a href="#二-需求与业务流程分析" class="headerlink" title="二 需求与业务流程分析"></a>二 需求与业务流程分析</h2><h3 id="1-认识店铺"><a href="#1-认识店铺" class="headerlink" title="1 认识店铺"></a>1 认识店铺</h3><p>容车宝的业务模式为：4s店可以在平台来入驻，发布自己的“汽车服务” ， 用户可以选择相关的“汽车服务”进行预约，下单。所以这里的店铺类似于京东，淘宝的“店铺” 。</p><ul><li>平台:提供管理系统，进行基础数据管理，店铺管理，用户管理等</li><li>店铺:入驻到平台，发布“汽车服务”提供给用户去预约下单</li><li>用户:通过门户网站选择相关”汽车服务”，预约下单</li></ul><h3 id="2-入驻流程"><a href="#2-入驻流程" class="headerlink" title="2.入驻流程"></a>2.入驻流程</h3><h4 id="2-1-流程分析"><a href="#2-1-流程分析" class="headerlink" title="2.1 流程分析"></a>2.1 流程分析</h4><p>​	店铺需要先进行注册，然后平台进行审核，审核通过后向商家发送一封激活邮件，商家需要通过激活链接去激活，激活之后商家的管理员才可以正常登陆。</p><p><img src="/breeze/3119132/image-20220901192124641.png" alt="image-20220901192124641"></p><h4 id="2-2-为什么需要审核"><a href="#2-2-为什么需要审核" class="headerlink" title="2.2 为什么需要审核"></a>2.2 为什么需要审核</h4><p>​ 首先，店铺入驻的地址是公开的，任意用户都能访问。那么有些恶意访问用户可能会提交一些具有侮辱、暴力、非法宣传的店铺名字，以及店铺logo提交一些涉黄、涉毒、涉赌、恶心、血腥暴力的图片。</p><p>​	例如：<img src="/breeze/3119132/image-20220901192405996.png" alt="image-20220901192405996"></p><h3 id="3-自动审核"><a href="#3-自动审核" class="headerlink" title="3. 自动审核"></a>3. 自动审核</h3><h4 id="3-1什么是自动审核"><a href="#3-1什么是自动审核" class="headerlink" title="3.1什么是自动审核"></a>3.1什么是自动审核</h4><p>​ 针对图像、文本、语音、视频等多媒体内容，提供全方位的审核能力，覆盖涉政、涉黄、涉恐、恶意推广、低质灌水 等内容自动鉴别。</p><h4 id="3-2-百度AI-内容审核功能"><a href="#3-2-百度AI-内容审核功能" class="headerlink" title="3.2 百度AI 内容审核功能"></a>3.2 百度AI 内容审核功能</h4><p>​ 以上的功能需要使用到图像识别功能。如果要自己实现是需要花费大量的时间以及人力。我们项目里面可以直接使用第三方提供的功能百度AI 的内容审核功能<a target="_blank" rel="noopener" href="https://ai.baidu.com/solution/censoring">https://ai.baidu.com/solution/censoring</a></p><p><img src="/breeze/3119132/1642158187086.png" alt="1642158187086"></p><h3 id="4-小结"><a href="#4-小结" class="headerlink" title="4 小结"></a>4 小结</h3><p>​	本项目采用自动审核+人工审核！一般请求用百度内容的人工智能技术完成自动审核，节约人力成本！提高效率。但是如果多次审核不通过，可以人工审核。</p><h2 id="三-实现"><a href="#三-实现" class="headerlink" title="三 实现"></a>三 实现</h2><h3 id="1-店铺入驻实现"><a href="#1-店铺入驻实现" class="headerlink" title="1 店铺入驻实现"></a>1 店铺入驻实现</h3><h4 id="1-1-模型设计"><a href="#1-1-模型设计" class="headerlink" title="1.1 模型设计"></a>1.1 模型设计</h4><ul><li><p>常量类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mliutm.base.constant;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 系统常量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseConstants</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 店铺状态</span></span><br><span class="line"><span class="comment">     * 待审核</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHOP_STATE_WAIT_AUTID</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 店铺状态</span></span><br><span class="line"><span class="comment">     * 审核通过，待激活</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHOP_STATE_WAIT_ACTIVE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 店铺状态</span></span><br><span class="line"><span class="comment">     * 激活成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHOP_STATE_ACTIVE_SUCCESS</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 店铺状态</span></span><br><span class="line"><span class="comment">     * 驳回</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHOP_STATE_REJECT_AUDIT</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 员工状态</span></span><br><span class="line"><span class="comment">     * 待激活</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPLOYEE_STATE_WAIT_AUTID</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 员工状态</span></span><br><span class="line"><span class="comment">     * 正常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPLOYEE_STATE_NORMAL</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 员工状态</span></span><br><span class="line"><span class="comment">     * 锁定</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPLOYEE_STATE_LOCK</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 员工状态</span></span><br><span class="line"><span class="comment">     * 注销</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPLOYEE_STATE_LOGOUT</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>模型类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//店铺</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shop</span> <span class="keyword">extends</span> <span class="title class_">BaseDomain</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Date</span> <span class="variable">registerTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">state</span> <span class="operator">=</span> BaseConstants.Shop.STATE_WAIT_AUTID;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String logo;</span><br><span class="line">    <span class="comment">/** 店铺管理 **/</span></span><br><span class="line">    <span class="keyword">private</span> Employee admin;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">extends</span> <span class="title class_">BaseDomain</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">state</span> <span class="operator">=</span> BaseConstants.Employee.STATE_NORMAL ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="1-2-前端实现"><a href="#1-2-前端实现" class="headerlink" title="1.2 前端实现"></a>1.2 前端实现</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--:model=&quot;shop&quot; 数据双向绑定--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ref=&quot;shopForm&quot; id=&quot;shopForm&quot;,给form取一个名字--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--:rules=&quot;formRules&quot; 校验规则--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;shop&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;shopForm&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;formRules&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;left&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-ruleForm login-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>店铺入驻<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span><span class="attr">label</span>=<span class="string">&quot;名称&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.name&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入店铺名称！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;tel&quot;</span> <span class="attr">label</span>=<span class="string">&quot;座机&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.tel&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入座机！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;店铺地址&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.address&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入地址！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        &lt;el-button size=&quot;small&quot; type=&quot;primary&quot; @click=&quot;selectAdrress&quot;&gt;选择&lt;/el-button&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">label</span>=<span class="string">&quot;店铺Logo&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.logo&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入logo！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;el-upload</span></span><br><span class="line"><span class="comment">            class=&quot;upload-demo&quot;</span></span><br><span class="line"><span class="comment">            action=&quot;http://localhost:1030/services/common/fastDfs/&quot;</span></span><br><span class="line"><span class="comment">            :on-preview=&quot;handlePreview&quot;</span></span><br><span class="line"><span class="comment">            :on-remove=&quot;handleRemove&quot;</span></span><br><span class="line"><span class="comment">            :on-success=&quot;handleSuccess&quot;</span></span><br><span class="line"><span class="comment">            :file-list=&quot;fileList&quot;</span></span><br><span class="line"><span class="comment">            list-type=&quot;picture&quot;&gt;</span></span><br><span class="line"><span class="comment">          &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span></span><br><span class="line"><span class="comment">          &lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;/el-upload&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>管理员信息设置<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;admin.username&quot;</span> <span class="attr">label</span>=<span class="string">&quot;账号&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.admin.username&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;admin.phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;手机号码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.admin.phone&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入电话！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;admin.email&quot;</span> <span class="attr">label</span>=<span class="string">&quot;电子邮件&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.admin.email&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入邮件！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;admin.password&quot;</span> <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.admin.password&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;admin.confirmPassword&quot;</span> <span class="attr">label</span>=<span class="string">&quot;确认密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;shop.admin.confirmPassword&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入确认密码！&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span> @<span class="attr">click.native.prevent</span>=<span class="string">&quot;settledIn&quot;</span> &gt;</span>入驻<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">        <span class="attr">title</span>=<span class="string">&quot;选择地址&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVisable&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">baidu-map</span> <span class="attr">:center</span>=<span class="string">&quot;&#123;lng: 116.403765, lat: 39.914850&#125;&quot;</span> <span class="attr">:zoom</span>=<span class="string">&quot;11&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-view</span> <span class="attr">class</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bm-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-control</span> <span class="attr">:offset</span>=<span class="string">&quot;&#123;width: &#x27;10px&#x27;, height: &#x27;10px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--:sugStyle=&quot;&#123;zIndex: 2100&#125; 让搜索提示上浮--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">bm-auto-complete</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">:sugStyle</span>=<span class="string">&quot;&#123;zIndex: 2100&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom:10px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;searchInput&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入关键字&quot;</span> <span class="attr">class</span>=<span class="string">&quot;searchinput&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;selectAdrressConfirm&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">bm-auto-complete</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bm-control</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-local-search</span> <span class="attr">:keyword</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">:auto-viewport</span>=<span class="string">&quot;true&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bm-local-search</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">baidu-map</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisable=false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisable=false&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> <span class="title function_">validatePass2</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请再次输入密码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">shop</span>.<span class="property">admin</span>.<span class="property">password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致!&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">keyword</span>:<span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dialogVisable</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fileList</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//shop:shop 为了做数据表单校验不要嵌套对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">shop</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">admin</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">username</span>:<span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">phone</span>:<span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">email</span>:<span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">password</span>:<span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">confirmPassword</span>:<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tel</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">address</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">logo</span>:<span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">formRules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入店铺名称!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tel</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入店铺座机!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">address</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入店铺地址!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;admin.phone&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入手机号!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// logo: [</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     &#123; required: true, message: &#x27;请输入店铺logo!&#x27;, trigger: &#x27;blur&#x27; &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ],</span></span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;admin.email&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">type</span>: <span class="string">&#x27;email&#x27;</span>,<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入邮箱!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;admin.username&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;admin.password&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码!&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;admin.confirmPassword&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">validator</span>: validatePass2, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125; <span class="comment">//自定义校验规则</span></span></span><br><span class="line"><span class="language-javascript">        ]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">selectAdrressConfirm</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//获取值搜索框值,设置给地址</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> searchInputV=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;searchInput&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">shop</span>.<span class="property">address</span> = searchInputV;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//关闭对话框</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogVisable</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">selectAdrress</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogVisable</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//文件上传成功回调</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSuccess</span>(<span class="params">response, file, fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">shop</span>.<span class="property">logo</span> = response.<span class="property">resultObj</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//文件删除</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleRemove</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> filePath =file.<span class="property">response</span>.<span class="property">resultObj</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">delete</span>(<span class="string">&quot;/common/fastDfs/?path=&quot;</span>+filePath)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">success</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;删除成功!&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span></span></span><br><span class="line"><span class="language-javascript">              &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;删除失败!&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span></span></span><br><span class="line"><span class="language-javascript">              &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//图片预览</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handlePreview</span>(<span class="params">file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(file);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//提交入驻</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">settledIn</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">shopForm</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//校验表单成功后才做一下操作</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认入驻吗？&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//拷贝后面对象的值到新对象,防止后面代码改动引起模型变化</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> para = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">shop</span>); <span class="comment">//shop 本身这个参数里面就有店铺和管理员信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 为了后台好接收，封装一个对象放到里面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//判断是否有id有就是修改,否则就是添加</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(<span class="string">&quot;/shop/settlement&quot;</span>,para).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">success</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">message</span>: <span class="string">&#x27;操作成功!&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//重置表单</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;shopForm&#x27;</span>].<span class="title function_">resetFields</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//跳转登录页面</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  -webkit-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  -moz-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-clip</span>: padding-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">180px</span> auto;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">35px</span> <span class="number">35px</span> <span class="number">15px</span> <span class="number">35px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">#cac6c6</span>;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0px</span> auto <span class="number">40px</span> auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#505458</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.remember</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">35px</span> <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.map</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.searchinput</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">9px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#dddee1</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">38px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-3-后端实现"><a href="#1-3-后端实现" class="headerlink" title="1.3 后端实现"></a>1.3 后端实现</h4><ol><li>controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/settlement&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> AjaxResult <span class="title function_">settlement</span><span class="params">(<span class="meta">@RequestBody</span> Shop shop)</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           shopService.settlement(shop);</span><br><span class="line">           <span class="keyword">return</span> AjaxResult.me();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           <span class="keyword">return</span> AjaxResult.me().setSuccess(<span class="literal">false</span>).setMessage(<span class="string">&quot;店铺入驻失败！&quot;</span>+e.getMessage());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>service</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">settlement</span><span class="params">(Shop shop)</span> &#123;</span><br><span class="line">        <span class="comment">//1 校验</span></span><br><span class="line">        validate(shop);</span><br><span class="line">        <span class="comment">//2 保存店铺信息</span></span><br><span class="line">        shop.setRegisterTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        shopMapper.save(shop);</span><br><span class="line">        <span class="comment">//3 保存店铺管理员信息，但是如果店铺管理员原来就有店铺</span></span><br><span class="line">        <span class="comment">//3.1 方案1（采纳）：直接使用原来的店铺管理员信息，或者删除原来的信息添加新的</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">admin</span> <span class="operator">=</span> shop.getAdmin();</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> admin.getUsername();</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">adminBydb</span> <span class="operator">=</span> employeeMapper.loadByUsername(username);</span><br><span class="line">        <span class="keyword">if</span> (adminBydb==<span class="literal">null</span>)&#123;</span><br><span class="line">            employeeMapper.save(admin);  <span class="comment">//店铺管理没有shop_id,只有店员有</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.2 方案2：不让入驻，直接登录，在后台添加店铺提交审核</span></span><br><span class="line">        <span class="comment">//4 设置管理员</span></span><br><span class="line">        shop.setAdminId(adminBydb==<span class="literal">null</span>?admin.getId():adminBydb.getId());</span><br><span class="line">        shopMapper.update(shop);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">validate</span><span class="params">(Shop shop)</span> &#123;</span><br><span class="line">        <span class="comment">//1.1 null检验</span></span><br><span class="line">        <span class="keyword">if</span> (shop==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(shop.getName()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (shop.getAdmin()==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(shop.getAdmin().getUsername())||</span><br><span class="line">                StringUtils.isEmpty(shop.getAdmin().getPassword())|| StringUtils.isEmpty(shop.getAdmin().getComfirmPassword()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="comment">//1.2 两次密码比对</span></span><br><span class="line">        <span class="keyword">if</span> (!shop.getAdmin().getPassword().trim().equals(shop.getAdmin().getComfirmPassword().trim()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;两次密码不一致&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.3 店铺是否存在</span></span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shopByDb</span> <span class="operator">=</span> shopMapper.loadByName(shop.getName());</span><br><span class="line">        <span class="keyword">if</span> (shopByDb!=<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;该店铺已经存在！&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-百度地图"><a href="#2-百度地图" class="headerlink" title="2 百度地图"></a>2 百度地图</h3><h4 id="2-1-为什么集成百度地图"><a href="#2-1-为什么集成百度地图" class="headerlink" title="2.1 为什么集成百度地图"></a>2.1 为什么集成百度地图</h4><p>通过百度地图拿到地址的经纬度</p><p><a target="_blank" rel="noopener" href="https://lbsyun.baidu.com/jsdemo.htm#a6_2">https://lbsyun.baidu.com/jsdemo.htm#a6_2</a></p><p><img src="/breeze/3119132/wps1-1684651353974.jpg" alt="img"></p><h4 id="2-2-百度地图开发平台"><a href="#2-2-百度地图开发平台" class="headerlink" title="2.2 百度地图开发平台"></a>2.2 百度地图开发平台</h4><p>​ 百度地图提供了很多开发的api，方便开发者接入到自己应用中.我们根据店铺注册的地址，在百度地图进行标注，方便系统管理员管理。</p><p><a target="_blank" rel="noopener" href="http://lbsyun.baidu.com/">http://lbsyun.baidu.com/</a></p><h5 id="2-2-1-百度账号注册"><a href="#2-2-1-百度账号注册" class="headerlink" title="2.2.1 百度账号注册"></a>2.2.1 百度账号注册</h5><p><img src="/breeze/3119132/wps2-1684651353977.jpg" alt="img"></p><h5><a href="#" class="headerlink"></a></h5><h5 id="2-2-2-创建应用，申请ak"><a href="#2-2-2-创建应用，申请ak" class="headerlink" title="2.2.2 创建应用，申请ak"></a>2.2.2 创建应用，申请ak</h5><p><img src="/breeze/3119132/wps3-1684651353978.jpg" alt="img"></p><p><img src="/breeze/3119132/wps4-1684651353978.jpg" alt="img"></p><h5 id="2-2-3-百度地图api讲解-JavaScript方式引入"><a href="#2-2-3-百度地图api讲解-JavaScript方式引入" class="headerlink" title="2.2.3 百度地图api讲解 - JavaScript方式引入"></a>2.2.3 百度地图api讲解 - JavaScript方式引入</h5><p><img src="/breeze/3119132/wps5-1684651353978.jpg" alt="img"></p><p>使用地址解析：</p><p><img src="/breeze/3119132/wps6.jpg" alt="img"></p><p><img src="/breeze/3119132/wps7.jpg" alt="img"></p><p>地址解析服务</p><p>根据地址描述获得坐标信息。</p><p>百度地图API提供Geocoder类进行地址解析，您可以通过Geocoder.getPoint()方法来将一段地址描述转换为一个坐标。</p><p>参照demo，完成：</p><p><img src="/breeze/3119132/wps8.jpg" alt="img"></p><h4 id="2-3-Vue集成百度地图"><a href="#2-3-Vue集成百度地图" class="headerlink" title="2.3 Vue集成百度地图"></a>2.3 Vue集成百度地图</h4><ol><li>安装</li></ol><p>npm install vue-baidu-map –save</p><ol start="2"><li>导入</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BaiduMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-baidu-map&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">BaiduMap</span>, &#123;</span><br><span class="line">    <span class="attr">ak</span>: <span class="string">&#x27;iQR27jtZ2LKciDan43uuxq8lg0ycwLaV&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>代码使用</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">        <span class="attr">title</span>=<span class="string">&quot;选择地址&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVisable&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">baidu-map</span> <span class="attr">:center</span>=<span class="string">&quot;&#123;lng: 116.403765, lat: 39.914850&#125;&quot;</span> <span class="attr">:zoom</span>=<span class="string">&quot;11&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-view</span> <span class="attr">class</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bm-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-control</span> <span class="attr">:offset</span>=<span class="string">&quot;&#123;width: &#x27;10px&#x27;, height: &#x27;10px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--:sugStyle=&quot;&#123;zIndex: 2100&#125; 让搜索提示上浮--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">bm-auto-complete</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">:sugStyle</span>=<span class="string">&quot;&#123;zIndex: 2100&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom:10px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;searchInput&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入关键字&quot;</span> <span class="attr">class</span>=<span class="string">&quot;searchinput&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;selectAdrressConfirm&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">bm-auto-complete</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bm-control</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bm-local-search</span> <span class="attr">:keyword</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">:auto-viewport</span>=<span class="string">&quot;true&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bm-local-search</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">baidu-map</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisable=false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisable=false&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure><p>获取地址的经纬度信息的工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 位置相关工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DistanceUtil</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Point <span class="title function_">getPoint</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">Application_ID</span> <span class="operator">=</span> <span class="string">&quot;jOIwwKAW2FvNfSkIiRrOlPfixtS8PZo3&quot;</span>;<span class="comment">//配置上自己的百度地图应用的AK</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sCurrentLine;</span><br><span class="line">            String sTotalString;</span><br><span class="line">            sCurrentLine = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            sTotalString = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            InputStream l_urlStream;</span><br><span class="line"><span class="comment">//          URL l_url = new java.net.URL(&quot;http://api.map.baidu.com/geocoder/v2/?address=&quot;+address.replaceAll(&quot; &quot;,&quot;&quot;)+&quot;&amp;output=json&amp;ak=&quot;+Application_ID+&quot;&amp;callback=showLocation&quot;);</span></span><br><span class="line">            <span class="type">URL</span> <span class="variable">l_url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://api.map.baidu.com/geocoding/v3/?address=&quot;</span> + address + <span class="string">&quot;&amp;output=json&amp;ak=&quot;</span> + Application_ID + <span class="string">&quot;&amp;callback=showLocation&quot;</span>);</span><br><span class="line">            <span class="type">HttpURLConnection</span> <span class="variable">l_connection</span> <span class="operator">=</span> (HttpURLConnection) l_url.openConnection();</span><br><span class="line">            l_connection.connect();</span><br><span class="line">            l_urlStream = l_connection.getInputStream();</span><br><span class="line">            java.io.<span class="type">BufferedReader</span> <span class="variable">l_reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">java</span>.io.BufferedReader(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(l_urlStream));</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> l_reader.readLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">            <span class="comment">//用经度分割返回的网页代码  </span></span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;,&quot;</span> + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">&quot;lat&quot;</span> + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span>;</span><br><span class="line">            String strs[] = str.split(s, <span class="number">2</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;\&quot;&quot;</span> + <span class="string">&quot;lng&quot;</span> + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span>;</span><br><span class="line">            String a[] = strs[<span class="number">0</span>].split(s1, <span class="number">2</span>);</span><br><span class="line">            s1 = <span class="string">&quot;&#125;&quot;</span> + <span class="string">&quot;,&quot;</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">            String a1[] = strs[<span class="number">1</span>].split(s1, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">Point</span> <span class="variable">point</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Point</span>();</span><br><span class="line">            point.setLng(Double.valueOf(a[<span class="number">1</span>]));</span><br><span class="line">            point.setLat(Double.valueOf(a1[<span class="number">0</span>]));</span><br><span class="line">            <span class="keyword">return</span> point;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 存放经纬度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="comment">//经度</span></span><br><span class="line">    <span class="keyword">private</span> Double lng;</span><br><span class="line">    <span class="comment">//维度</span></span><br><span class="line">    <span class="keyword">private</span> Double lat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-店铺审核实现"><a href="#2-店铺审核实现" class="headerlink" title="2 店铺审核实现"></a>2 店铺审核实现</h3><h4 id="2-1-流程分析-1"><a href="#2-1-流程分析-1" class="headerlink" title="2.1 流程分析"></a>2.1 流程分析</h4><p>店铺入驻就要进行自动审核，多次审核不通过，就可以进行人工审核。</p><h5 id="2-2-1准备工作"><a href="#2-2-1准备工作" class="headerlink" title="2.2.1准备工作"></a>2.2.1准备工作</h5><h6 id="2-2-1-1申请账号"><a href="#2-2-1-1申请账号" class="headerlink" title="2.2.1.1申请账号"></a>2.2.1.1申请账号</h6><p><a target="_blank" rel="noopener" href="https://ai.baidu.com/solution/censoring">https://ai.baidu.com/solution/censoring</a></p><p>先创建应用，再设置策略</p><p><img src="/breeze/3119132/image-20221102040711724.png" alt="image-20221102040711724"></p><p><img src="/breeze/3119132/image-20221102040753918.png" alt="image-20221102040753918"></p><p><img src="/breeze/3119132/image-20221102041738012.png" alt="image-20221102041738012"></p><p>也可参考官方文档：<a target="_blank" rel="noopener" href="https://cloud.baidu.com/doc/ANTIPORN/s/Wkhu9d5iy">https://cloud.baidu.com/doc/ANTIPORN/s/Wkhu9d5iy</a></p><h6 id="2-2-1-2查看文档"><a href="#2-2-1-2查看文档" class="headerlink" title="2.2.1.2查看文档"></a>2.2.1.2查看文档</h6><p>​	官方文档地址<a target="_blank" rel="noopener" href="https://ai.baidu.com/ai-doc/ANTIPORN/Rk3h6xb3i">https://ai.baidu.com/ai-doc/ANTIPORN/Rk3h6xb3i</a></p><p>​	第一步：获取 access_token</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.baidu.ai.aip.auth;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取token类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaiduAuditUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取权限token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回示例：</span></span><br><span class="line"><span class="comment">     * &#123;</span></span><br><span class="line"><span class="comment">     * &quot;access_token&quot;: &quot;24.460da4889caad24cccdb1fea17221975.2592000.1491995545.282335-1234567&quot;,</span></span><br><span class="line"><span class="comment">     * &quot;expires_in&quot;: 2592000</span></span><br><span class="line"><span class="comment">     * &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAuth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 官网获取的 API Key 更新为你注册的</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientId</span> <span class="operator">=</span> <span class="string">&quot;百度云应用的AK&quot;</span>;</span><br><span class="line">        <span class="comment">// 官网获取的 Secret Key 更新为你注册的</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientSecret</span> <span class="operator">=</span> <span class="string">&quot;百度云应用的SK&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> getAuth(clientId, clientSecret);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取API访问token</span></span><br><span class="line"><span class="comment">     * 该token有一定的有效期，需要自行管理，当失效时需重新获取.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ak - 百度云官网获取的 API Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sk - 百度云官网获取的 Secret Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> assess_token 示例：</span></span><br><span class="line"><span class="comment">     * &quot;24.460da4889caad24cccdb1fea17221975.2592000.1491995545.282335-1234567&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAuth</span><span class="params">(String ak, String sk)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取token地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">authHost</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/oauth/2.0/token?&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">getAccessTokenUrl</span> <span class="operator">=</span> authHost</span><br><span class="line">                <span class="comment">// 1. grant_type为固定参数</span></span><br><span class="line">                + <span class="string">&quot;grant_type=client_credentials&quot;</span></span><br><span class="line">                <span class="comment">// 2. 官网获取的 API Key</span></span><br><span class="line">                + <span class="string">&quot;&amp;client_id=&quot;</span> + ak</span><br><span class="line">                <span class="comment">// 3. 官网获取的 Secret Key</span></span><br><span class="line">                + <span class="string">&quot;&amp;client_secret=&quot;</span> + sk;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">realUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(getAccessTokenUrl);</span><br><span class="line">            <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">            <span class="type">HttpURLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> (HttpURLConnection) realUrl.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">            connection.connect();</span><br><span class="line">            <span class="comment">// 获取所有响应头字段</span></span><br><span class="line">            Map&lt;String, List&lt;String&gt;&gt; map = connection.getHeaderFields();</span><br><span class="line">            <span class="comment">// 遍历所有的响应头字段</span></span><br><span class="line">            <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">                System.err.println(key + <span class="string">&quot;---&gt;&quot;</span> + map.get(key));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 定义 BufferedReader输入流来读取URL的响应</span></span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream()));</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                result += line;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 返回结果示例</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            System.err.println(<span class="string">&quot;result:&quot;</span> + result);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">access_token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> access_token;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;获取token失败！&quot;</span>);</span><br><span class="line">            e.printStackTrace(System.err);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步：利用获取的access_token 调用接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.baidu.ai.aip;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.ai.aip.utils.HttpUtil;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 文本审核接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextCensor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 重要提示代码中所需工具类</span></span><br><span class="line"><span class="comment">    * FileUtil,Base64Util,HttpUtil,GsonUtils请从</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/470B3ACCA3FE43788B5A963BF0B625F3</span></span><br><span class="line"><span class="comment">    * 下载</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">TextCensor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 请求url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/rest/2.0/solution/v1/text_censor/v2/user_defined&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;text=&quot;</span> + <span class="string">&quot;不要侮辱伟大的乐侃&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> <span class="string">&quot;[调用鉴权接口获取的token]&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.post(url, accessToken, param);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TextCensor.TextCensor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.baidu.ai.aip;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.ai.aip.utils.Base64Util;</span><br><span class="line"><span class="keyword">import</span> com.baidu.ai.aip.utils.FileUtil;</span><br><span class="line"><span class="keyword">import</span> com.baidu.ai.aip.utils.HttpUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 图像审核接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImgCensor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 重要提示代码中所需工具类</span></span><br><span class="line"><span class="comment">    * FileUtil,Base64Util,HttpUtil,GsonUtils请从</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3</span></span><br><span class="line"><span class="comment">    * https://ai.baidu.com/file/470B3ACCA3FE43788B5A963BF0B625F3</span></span><br><span class="line"><span class="comment">    * 下载</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">ImgCensor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 请求url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/rest/2.0/solution/v1/img_censor/v2/user_defined&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 本地文件路径</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;[本地文件路径]&quot;</span>;</span><br><span class="line">            <span class="type">byte</span>[] imgData = FileUtil.readFileByBytes(filePath);</span><br><span class="line">            <span class="type">String</span> <span class="variable">imgStr</span> <span class="operator">=</span> Base64Util.encode(imgData);</span><br><span class="line">            <span class="type">String</span> <span class="variable">imgParam</span> <span class="operator">=</span> URLEncoder.encode(imgStr, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;image=&quot;</span> + imgParam;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> <span class="string">&quot;[调用鉴权接口获取的token]&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.post(url, accessToken, param);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ImgCensor.ImgCensor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>要审核的图片用户需要根据自己的情况调整参数。</p><h5 id="2-2-2-编写自己的工具类"><a href="#2-2-2-编写自己的工具类" class="headerlink" title="2.2.2.编写自己的工具类"></a>2.2.2.编写自己的工具类</h5><p>HttpUtil.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.httpclient.HttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.httpclient.HttpException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.httpclient.methods.GetMethod;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.httpclient.params.HttpMethodParams;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * http 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">post</span><span class="params">(String requestUrl, String accessToken, String params)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">contentType</span> <span class="operator">=</span> <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> HttpUtil.post(requestUrl, accessToken, contentType, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">post</span><span class="params">(String requestUrl, String accessToken, String contentType, String params)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">encoding</span> <span class="operator">=</span> <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (requestUrl.contains(<span class="string">&quot;nlp&quot;</span>)) &#123;</span><br><span class="line">            encoding = <span class="string">&quot;GBK&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> HttpUtil.post(requestUrl, accessToken, contentType, params, encoding);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">post</span><span class="params">(String requestUrl, String accessToken, String contentType, String params, String encoding)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> requestUrl + <span class="string">&quot;?access_token=&quot;</span> + accessToken;</span><br><span class="line">        <span class="keyword">return</span> HttpUtil.postGeneralUrl(url, contentType, params, encoding);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">postGeneralUrl</span><span class="params">(String generalUrl, String contentType, String params, String encoding)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(generalUrl);</span><br><span class="line">        <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">        <span class="type">HttpURLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> (HttpURLConnection) url.openConnection();</span><br><span class="line">        connection.setRequestMethod(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置通用的请求属性</span></span><br><span class="line">        connection.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, contentType);</span><br><span class="line">        connection.setRequestProperty(<span class="string">&quot;Connection&quot;</span>, <span class="string">&quot;Keep-Alive&quot;</span>);</span><br><span class="line">        connection.setUseCaches(<span class="literal">false</span>);</span><br><span class="line">        connection.setDoOutput(<span class="literal">true</span>);</span><br><span class="line">        connection.setDoInput(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 得到请求的输出流对象</span></span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(connection.getOutputStream());</span><br><span class="line">        out.write(params.getBytes(encoding));</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 建立实际的连接</span></span><br><span class="line">        connection.connect();</span><br><span class="line">        <span class="comment">// 获取所有响应头字段</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; headers = connection.getHeaderFields();</span><br><span class="line">        <span class="comment">// 遍历所有的响应头字段</span></span><br><span class="line">        <span class="keyword">for</span> (String key : headers.keySet()) &#123;</span><br><span class="line">            System.err.println(key + <span class="string">&quot;---&gt;&quot;</span> + headers.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 定义 BufferedReader输入流来读取URL的响应</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        in = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream(), encoding));</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        String getLine;</span><br><span class="line">        <span class="keyword">while</span> ((getLine = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            result += getLine;</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">        System.err.println(<span class="string">&quot;result:&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送get请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url 请求地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回内容 json</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">httpGet</span><span class="params">(String url)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1 创建发起请求客户端</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">HttpClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpClient</span>();</span><br><span class="line">            <span class="comment">// 2 创建要发起请求-tet</span></span><br><span class="line">            <span class="type">GetMethod</span> <span class="variable">getMethod</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetMethod</span>(url);</span><br><span class="line"><span class="comment">//            getMethod.addRequestHeader(&quot;Content-Type&quot;,</span></span><br><span class="line"><span class="comment">//                    &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;);</span></span><br><span class="line">            getMethod.getParams().setParameter(HttpMethodParams.HTTP_CONTENT_CHARSET,<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">            <span class="comment">// 3 通过客户端传入请求就可以发起请求,获取响应对象</span></span><br><span class="line">            client.executeMethod(getMethod);</span><br><span class="line">            <span class="comment">// 4 提取响应json字符串返回</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(getMethod.getResponseBodyAsString().getBytes(<span class="string">&quot;utf8&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BaiduAuditUtils.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 百度认证工具类：注意要修改API Key 和 Secret Key</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaiduAuditUtils</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取权限token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回示例：</span></span><br><span class="line"><span class="comment">     * &#123;</span></span><br><span class="line"><span class="comment">     * &quot;access_token&quot;: &quot;24.3265383f84ac64db9eff781e70587614.2592000.1654844607.282335-26205415&quot;,</span></span><br><span class="line"><span class="comment">     * &quot;expires_in&quot;: 2592000</span></span><br><span class="line"><span class="comment">     * &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAuth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 官网获取的 API Key 更新为你注册的</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientId</span> <span class="operator">=</span> <span class="string">&quot;YENQvtXlXWjOEqvAE4RwPZAv&quot;</span>;</span><br><span class="line">        <span class="comment">// 官网获取的 Secret Key 更新为你注册的</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientSecret</span> <span class="operator">=</span> <span class="string">&quot;DhZPIHdV0aAFmFAQDH2aQ0jjqTqL8SxB&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> getAuth(clientId, clientSecret);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取API访问token</span></span><br><span class="line"><span class="comment">     * 该token有一定的有效期，需要自行管理，当失效时需重新获取.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ak - 百度云官网获取的 API Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sk - 百度云官网获取的 Securet Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> assess_token 示例：</span></span><br><span class="line"><span class="comment">     * &quot;24.460da4889caad24cccdb1fea17221975.2592000.1491995545.282335-1234567&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAuth</span><span class="params">(String ak, String sk)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取token地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">authHost</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/oauth/2.0/token?&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">getAccessTokenUrl</span> <span class="operator">=</span> authHost</span><br><span class="line">                <span class="comment">// 1. grant_type为固定参数</span></span><br><span class="line">                + <span class="string">&quot;grant_type=client_credentials&quot;</span></span><br><span class="line">                <span class="comment">// 2. 官网获取的 API Key</span></span><br><span class="line">                + <span class="string">&quot;&amp;client_id=&quot;</span> + ak</span><br><span class="line">                <span class="comment">// 3. 官网获取的 Secret Key</span></span><br><span class="line">                + <span class="string">&quot;&amp;client_secret=&quot;</span> + sk;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">realUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(getAccessTokenUrl);</span><br><span class="line">            <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">            <span class="type">HttpURLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> (HttpURLConnection) realUrl.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">            connection.connect();</span><br><span class="line">            <span class="comment">// 获取所有响应头字段</span></span><br><span class="line">            Map&lt;String, List&lt;String&gt;&gt; map = connection.getHeaderFields();</span><br><span class="line">            <span class="comment">// 遍历所有的响应头字段</span></span><br><span class="line">           <span class="comment">/* for (String key : map.keySet()) &#123;</span></span><br><span class="line"><span class="comment">                System.err.println(key + &quot;---&gt;&quot; + map.get(key));</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="comment">// 定义 BufferedReader输入流来读取URL的响应</span></span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream()));</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                result += line;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 返回结果示例</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">//System.err.println(&quot;result:&quot; + result);</span></span><br><span class="line">            JSONObject jsonObject= JSONObject.parseObject(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">access_token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> access_token;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">//System.err.printf(&quot;获取token失败！&quot;);</span></span><br><span class="line">            e.printStackTrace(System.err);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文本审核</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,Object&gt; <span class="title function_">textCensor</span><span class="params">(String param)</span> &#123;</span><br><span class="line">        <span class="comment">// 请求url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/rest/2.0/solution/v1/text_censor/v2/user_defined&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> getAuth();</span><br><span class="line">			<span class="comment">//处理参数格式</span></span><br><span class="line">            param = <span class="string">&quot;text=&quot;</span> + param;</span><br><span class="line">            </span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.post(url, accessToken, param);</span><br><span class="line">            JSONObject jsonObject= JSONObject.parseObject(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">conclusion</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;conclusion&quot;</span>);</span><br><span class="line">            Map&lt;String,Object&gt; map =  <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;合规&quot;</span>.equals(conclusion))&#123;</span><br><span class="line">                map.put(<span class="string">&quot;success&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">                map.put(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;合规&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> map;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dataStr</span> <span class="operator">=</span>  jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> JSONObject.parseArray(dataStr);</span><br><span class="line">                String errorMsg= jsonArray.getJSONObject(<span class="number">0</span>).getString(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">                map.put(<span class="string">&quot;success&quot;</span>,<span class="literal">false</span>);</span><br><span class="line">                map.put(<span class="string">&quot;message&quot;</span>,errorMsg);</span><br><span class="line">                <span class="keyword">return</span> map;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imageUrl 需要审核的图片路径地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title function_">imgCensor</span><span class="params">(String imageUrl)</span> &#123;</span><br><span class="line">        <span class="comment">// 请求url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://aip.baidubce.com/rest/2.0/solution/v1/img_censor/v2/user_defined&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//图片地址进行编码</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">imgParam</span> <span class="operator">=</span> URLEncoder.encode(imageUrl, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            <span class="comment">//设置参数</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;imgUrl=&quot;</span> + imgParam;</span><br><span class="line">            <span class="comment">// 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> getAuth();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.post(url, accessToken, param);</span><br><span class="line">            JSONObject jsonObject= JSONObject.parseObject(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">conclusion</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;conclusion&quot;</span>);</span><br><span class="line">            Map&lt;String,Object&gt; map =  <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;合规&quot;</span>.equals(conclusion))&#123;</span><br><span class="line">                map.put(<span class="string">&quot;success&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">                map.put(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;合规&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> map;</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dataStr</span> <span class="operator">=</span>  jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> JSONObject.parseArray(dataStr);</span><br><span class="line">                String errorMsg= jsonArray.getJSONObject(<span class="number">0</span>).getString(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">                map.put(<span class="string">&quot;success&quot;</span>,<span class="literal">false</span>);</span><br><span class="line">                map.put(<span class="string">&quot;message&quot;</span>,errorMsg);</span><br><span class="line">                <span class="keyword">return</span> map;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(BaiduAuditUtils.getAuth());</span><br><span class="line">        <span class="comment">//System.out.println(&quot;姚桑:&quot;+BaiduAuditUtils.textCensor(&quot;姚桑&quot;));//false</span></span><br><span class="line">        <span class="comment">//System.out.println(BaiduAuditUtils.textCensor(&quot;cnm&quot;));//false</span></span><br><span class="line">        <span class="comment">//System.out.println(BaiduAuditUtils.textCensor(&quot;sb&quot;));//false</span></span><br><span class="line">        System.out.println(BaiduAuditUtils.textCensor(<span class="string">&quot;牛逼&quot;</span>));<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//System.out.println(BaiduAuditUtils.textCensor(&quot;日寇&quot;));//true</span></span><br><span class="line">        <span class="comment">//System.out.println(BaiduAuditUtils.textCensor(&quot;公司&quot;));//true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>依赖的jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 主要用于发送http请求--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-httpclient<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.58<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-3-实现"><a href="#2-3-实现" class="headerlink" title="2.3 实现"></a>2.3 实现</h4><h5 id="2-3-1自动审核"><a href="#2-3-1自动审核" class="headerlink" title="2.3.1自动审核"></a>2.3.1自动审核</h5><p>上面的工具类把文本验证以及图片验证抽取成另个方法，在用户提交店铺数据保存之前去验证用户数据。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 百度内容审核</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBaiduAiService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 文本</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgUrl 图片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> videoUrl 视频</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    AjaxResult <span class="title function_">audit</span><span class="params">(String text,String imgUrl,String videoUrl)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaiduAiServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IBaiduAiService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">audit</span><span class="params">(String text, String imgUrl, String videoUrl)</span> &#123;</span><br><span class="line">        <span class="type">AjaxResult</span> <span class="variable">result</span> <span class="operator">=</span> AjaxResult.me();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(text)) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; textAuditResult =</span><br><span class="line">                    BaiduAuditUtils.TextCensor(text);</span><br><span class="line">            <span class="type">Boolean</span> <span class="variable">success</span> <span class="operator">=</span> (Boolean) textAuditResult.get(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> (String) textAuditResult.get(<span class="string">&quot;message&quot;</span>);</span><br><span class="line">            <span class="comment">//只有失败我才做操作</span></span><br><span class="line">            <span class="keyword">if</span> (!success)&#123;</span><br><span class="line">                result.setSuccess(<span class="literal">false</span>);</span><br><span class="line">                sb.append(text+<span class="string">&quot;:&quot;</span>+message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(imgUrl)) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; imgAuditResult =</span><br><span class="line">                    BaiduAuditUtils.ImgCensor(imgUrl);</span><br><span class="line">            <span class="type">Boolean</span> <span class="variable">success</span> <span class="operator">=</span> (Boolean) imgAuditResult.get(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> (String) imgAuditResult.get(<span class="string">&quot;message&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (!success)&#123;</span><br><span class="line">                result.setSuccess(<span class="literal">false</span>);</span><br><span class="line">                sb.append(imgUrl+<span class="string">&quot;:&quot;</span>+message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(videoUrl)) &#123;</span><br><span class="line">            <span class="comment">//@TODO</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!result.isSuccess())</span><br><span class="line">            result.setMessage(sb.toString());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">settlement</span><span class="params">(Shop shop)</span> &#123;</span><br><span class="line">        <span class="comment">//1 校验</span></span><br><span class="line">        validate(shop);</span><br><span class="line">        <span class="comment">//2 保存店铺信息</span></span><br><span class="line">        shop.setRegisterTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        shopMapper.save(shop);</span><br><span class="line">        <span class="comment">//3 保存店铺管理员信息，但是如果店铺管理员原来就有店铺</span></span><br><span class="line">        <span class="comment">//3.1 方案1（采纳）：直接使用原来的店铺管理员信息，或者删除原来的信息添加新的</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">admin</span> <span class="operator">=</span> shop.getAdmin();</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> admin.getUsername();</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">adminBydb</span> <span class="operator">=</span> employeeMapper.loadByUsername(username);</span><br><span class="line">        <span class="keyword">if</span> (adminBydb==<span class="literal">null</span>)&#123;</span><br><span class="line">            employeeMapper.save(admin);  <span class="comment">//店铺管理没有shop_id,只有店员有</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.2 方案2：不让入驻，直接登录，在后台添加店铺提交审核</span></span><br><span class="line">        <span class="comment">//4 设置管理员</span></span><br><span class="line">        shop.setAdminId(adminBydb==<span class="literal">null</span>?admin.getId():adminBydb.getId());</span><br><span class="line">        <span class="comment">//shopMapper.update(shop);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5 进行自动审核，根据审核结果需要修改店铺状态，并且添加审核日志</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">authText</span> <span class="operator">=</span> shop.getName()+<span class="string">&quot; &quot;</span>+shop.getAddress();</span><br><span class="line">        <span class="type">AjaxResult</span> <span class="variable">ajaxResult</span> <span class="operator">=</span> baiduAiService</span><br><span class="line">                .audit(authText, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (ajaxResult.isSuccess())&#123;</span><br><span class="line">            shop.setState(BaseConstants.Shop.STATE_WAIT_ACTIVE);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            shop.setState(BaseConstants.Shop.STATE_REJECT_AUDIT);</span><br><span class="line">        &#125;</span><br><span class="line">        shopMapper.update(shop);</span><br><span class="line"></span><br><span class="line">        <span class="type">ShopAuditLog</span> <span class="variable">auditLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShopAuditLog</span>();</span><br><span class="line">        auditLog.setState(ajaxResult.isSuccess()?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">        auditLog.setShopId(shop.getId());</span><br><span class="line">        <span class="comment">//没有审核人，因为是自动审核，但是有审核时间</span></span><br><span class="line">        auditLog.setAuditTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        auditLog.setNote(ajaxResult.isSuccess()?<span class="string">&quot;审核通过!&quot;</span>:<span class="string">&quot;失败,&quot;</span>+ajaxResult.getMessage());</span><br><span class="line">        logMapper.save(auditLog);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">validate</span><span class="params">(Shop shop)</span> &#123;</span><br><span class="line">        <span class="comment">//1.1 null检验</span></span><br><span class="line">        <span class="keyword">if</span> (shop==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(shop.getName()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (shop.getAdmin()==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(shop.getAdmin().getUsername())||</span><br><span class="line">                StringUtils.isEmpty(shop.getAdmin().getPassword())|| StringUtils.isEmpty(shop.getAdmin().getComfirmPassword()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;系统错误！请输入相关信息后再操作&quot;</span>);</span><br><span class="line">        <span class="comment">//1.2 两次密码比对</span></span><br><span class="line">        <span class="keyword">if</span> (!shop.getAdmin().getPassword().trim().equals(shop.getAdmin().getComfirmPassword().trim()))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;两次密码不一致&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.3 店铺是否存在</span></span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shopByDb</span> <span class="operator">=</span> shopMapper.loadByName(shop.getName());</span><br><span class="line">        <span class="keyword">if</span> (shopByDb!=<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;该店铺已经存在！&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="2-3-2手动审核-自己做"><a href="#2-3-2手动审核-自己做" class="headerlink" title="2.3.2手动审核-自己做"></a>2.3.2手动审核-自己做</h5><p><img src="/breeze/3119132/image-20220902160252863.png" alt="image-20220902160252863"></p><p>​	前端提交手动审核</p><p>​ 参数包括:审核结果 通过&#x2F;驳回 审核原因</p><p>后端:</p><p>​	接收到审核结果和审核原因,</p><p>​ 如果是通过,就修改店铺的状态&#x3D;3</p><p>​ 如果是驳回,就修改店铺的状态&#x3D;4</p><p>​ 保存店铺审核日志</p><h3 id="3-商家激活"><a href="#3-商家激活" class="headerlink" title="3 商家激活"></a>3 商家激活</h3><h4 id="3-1-业务分析"><a href="#3-1-业务分析" class="headerlink" title="3.1 业务分析"></a>3.1 业务分析</h4><p><img src="/breeze/3119132/image-20220901194202081.png" alt="image-20220901194202081"></p><h4 id="3-2-技术准备-邮件技术"><a href="#3-2-技术准备-邮件技术" class="headerlink" title="3.2 技术准备-邮件技术"></a>3.2 技术准备-邮件技术</h4><h5 id="3-2-1-准备工作"><a href="#3-2-1-准备工作" class="headerlink" title="3.2.1 准备工作"></a>3.2.1 准备工作</h5><p>所有邮件的发送都需要有运营商的支持，例如qq邮箱，163等。要发送邮件需要先获取服务商提供的授权码。以qq邮箱为例：</p><p>email.qq.com</p><p><img src="/breeze/3119132/image-20220902161141923.png" alt="image-20220902161141923"></p><p><img src="/breeze/3119132/wps1.jpg" alt="img"></p><p><img src="/breeze/3119132/wps2.jpg" alt="img"></p><p>rawpagwmdbapbeii</p><h5 id="3-2-2-创建项目导入jar"><a href="#3-2-2-创建项目导入jar" class="headerlink" title="3.2.2 创建项目导入jar"></a>3.2.2 创建项目导入jar</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--对邮件的支持jar--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="3-2-3-发送信息设置"><a href="#3-2-3-发送信息设置" class="headerlink" title="3.2.3 发送信息设置"></a>3.2.3 发送信息设置</h5><p><img src="/breeze/3119132/wps3.jpg" alt="img"></p><p>发送邮件需要配置很多关于发送人的信息，Springboot对此已经通过MailSenderAutoConfiguration类进行了基本的配置。</p><p><img src="/breeze/3119132/wps4.jpg" alt="img"></p><p>这些基本属性又是通过MailProperties获取属性</p><p><img src="/breeze/3119132/wps5.jpg" alt="img"></p><p>我们的需要做的工作就是给上面的类配置我们自己的发件人相关信息。</p><p>添加配置文件：application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置邮箱主机(服务商)</span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="comment"># 设置用户名</span></span><br><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">903039920@qq.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 设置密码，该处的密码是QQ邮箱开启SMTP的授权码而非QQ密码</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">rawpagwmdbapbeii</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 必须进行授权认证，它的目的就是阻止他人任意乱发邮件</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.auth</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#SMTP加密方式:连接到一个TLS保护连接</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.enable</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.required</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><p>application.yml-spring下面放</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">mail:</span></span><br><span class="line">       <span class="attr">host:</span> <span class="string">smtp.qq.com</span></span><br><span class="line">       <span class="attr">username:</span> <span class="number">903039920</span><span class="string">@qq.com</span></span><br><span class="line">       <span class="attr">password:</span> <span class="string">rawpagwmdbapbeii</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><blockquote><p><code>application.yml</code>和<code>application.properties</code>二选一即可</p></blockquote><h5 id="3-2-4-发送邮件入门"><a href="#3-2-4-发送邮件入门" class="headerlink" title="3.2.4 发送邮件入门"></a>3.2.4 发送邮件入门</h5><h6 id="3-2-4-1-简单邮件"><a href="#3-2-4-1-简单邮件" class="headerlink" title="3.2.4.1 简单邮件"></a>3.2.4.1 简单邮件</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender javaMailSender;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">send</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">mailMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        <span class="comment">//设置发送人</span></span><br><span class="line">        mailMessage.setFrom(<span class="string">&quot;64009120@qq.com&quot;</span>);</span><br><span class="line">        <span class="comment">//邮件主题</span></span><br><span class="line">        mailMessage.setSubject(<span class="string">&quot;新型冠状病毒防护指南&quot;</span>);</span><br><span class="line">        <span class="comment">//邮件内容</span></span><br><span class="line">        mailMessage.setText(<span class="string">&quot;好好在家待着.....&quot;</span>);</span><br><span class="line">        <span class="comment">//收件人</span></span><br><span class="line">        mailMessage.setTo(<span class="string">&quot;64009120@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">        javaMailSender.send(mailMessage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="3-2-4-2-复杂邮件"><a href="#3-2-4-2-复杂邮件" class="headerlink" title="3.2.4.2 复杂邮件"></a>3.2.4.2 复杂邮件</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">//创建复杂邮件对象</span></span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> javaMailSender.createMimeMessage();</span><br><span class="line">    <span class="comment">//发送复杂邮件的工具类</span></span><br><span class="line">    <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage,<span class="literal">true</span>,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    helper.setFrom(<span class="string">&quot;64009120@qq.com&quot;</span>);</span><br><span class="line">    helper.setSubject(<span class="string">&quot;新型冠状病毒防护指南&quot;</span>);</span><br><span class="line"><span class="comment">//     http://img30.360buyimg.com/popWaterMark/jfs/t1/67988/7/14094/232759/5db64acfE6ab2b09e/38b5cb3dc38b4b1f.jpg&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 这个setText有两个参数，一个可以是html代码，如果要解析html代码的话则第二个参数必须是true</span></span><br><span class="line">    helper.setText(<span class="string">&quot;&lt;h1&gt;新型冠状病毒防护守则&lt;/h1&gt;&quot;</span>+</span><br><span class="line">            <span class="string">&quot;&lt;img src=&#x27;http://img30.360buyimg.com/popWaterMark/jfs/t1/67988/7/14094/232759/5db64acfE6ab2b09e/38b5cb3dc38b4b1f.jpg\&quot;&#x27; /&gt;&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//添加附件</span></span><br><span class="line">    helper.addAttachment(<span class="string">&quot;罗宾.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\hm\\Desktop\\work\\aa.jpg&quot;</span>));</span><br><span class="line">    helper.addAttachment(<span class="string">&quot;压缩文件&quot;</span>, <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\hm\\Desktop\\20191010\\2020-02-05-智能商贸-DAY4\\resources\\resources.zip&quot;</span>));</span><br><span class="line">    <span class="comment">//收件人</span></span><br><span class="line">    helper.setTo(<span class="string">&quot;2518743821@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    javaMailSender.send(mimeMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-邮件激活扩展"><a href="#3-3-邮件激活扩展" class="headerlink" title="3.3 邮件激活扩展"></a>3.3 邮件激活扩展</h4><p><img src="/breeze/3119132/image-20220902165311306.png" alt="image-20220902165311306"></p><p>基础版本： 你发送的邮件里面有个激活店铺controller方法的地址，点击以后就触发后端服务，在里面完成状态改变。</p><p>​ 发送邮件的时候：</p><p>​ 收件人取店铺管理员的邮箱</p><p>​ 主题：店铺激活</p><p>​ 内容：包含激活链接,<a target="_blank" rel="noopener" href="http://localhost/shop/active/1">http://localhost:80/shop/active/1</a> 店铺的id不能写死,要获取当前要激活店铺的id</p><p>店铺激活的时候:要修改店铺的状态&#x3D;已激活,并且要将店铺管理员的状态修改为 正常</p><p>高级版本：最后激活时间</p><p>​ 1发送邮件直接往redis存放一个uuid激活码，过期时间是30分钟</p><p>​ shop_active_{店铺id}&#x3D;uuid，过期时间三十分钟</p><p>​ adfnaofnasofasp f&#x3D; 63</p><p>​ 2 发送邮件链接的时候，不仅要把店铺id发过去，还要发送激活码</p><p>​ <a target="_blank" rel="noopener" href="http://localhost/shop/active?shopId=1&activeCode=uuid">http://localhost/shop/active?shopId=1&amp;activeCode=uuid</a></p><p>​ 3 后端激活处理，获取激活码和id，并且判断redis激活码是否正确或是否过期。满足添加才激活。</p><p>​ 地址栏获取激活码</p><p>​ shop_active_{店铺id}获取的激活码</p><p>​ 两个激活码进行比对正确才能激活，当然过期了也不能激活</p><p>RedisUtil</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取连接池对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">JedisPool</span> <span class="variable">jedisPool</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//1 创建连接池配置对象</span></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//2 进行配置-四个配置</span></span><br><span class="line">        config.setMaxIdle(<span class="number">1</span>);<span class="comment">//最小连接数</span></span><br><span class="line">        config.setMaxTotal(<span class="number">11</span>);<span class="comment">//最大连接数</span></span><br><span class="line">        config.setMaxWaitMillis(<span class="number">10</span> * <span class="number">1000L</span>);<span class="comment">//最长等待时间</span></span><br><span class="line">        config.setTestOnBorrow(<span class="literal">true</span>);<span class="comment">//测试连接时是否畅通</span></span><br><span class="line">        <span class="comment">//3 通过配置对象创建连接池对象</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties = <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(RedisUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;redis.properties&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">host</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;redis.host&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">port</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;redis.port&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;redis.password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">timeout</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;redis.timeout&quot;</span>);</span><br><span class="line">        System.out.println(host);</span><br><span class="line">        System.out.println(port);</span><br><span class="line">        System.out.println(password);</span><br><span class="line">        System.out.println(timeout);</span><br><span class="line">        jedisPool = <span class="keyword">new</span> <span class="title class_">JedisPool</span>(config, host, Integer.valueOf(port),Integer.valueOf(timeout), password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="keyword">public</span> Jedis <span class="title function_">getSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">closeSource</span><span class="params">(Jedis jedis)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (jedis != <span class="literal">null</span>) &#123;</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置字符值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        jedis.del(key);</span><br><span class="line">        closeSource(jedis);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置字符值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        jedis.set(key, value);</span><br><span class="line">        closeSource(jedis);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置字符值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(String key, String value,<span class="type">int</span> expire)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        jedis.setex(key,expire,value);</span><br><span class="line">        closeSource(jedis);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">byte</span>[] key, <span class="type">byte</span>[] value)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        jedis.set(key, value);</span><br><span class="line">        closeSource(jedis);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[]  get(<span class="type">byte</span>[] key) &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> jedis.get(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            closeSource(jedis);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置字符值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> getSource();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> jedis.get(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            closeSource(jedis);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四-相关图示"><a href="#四-相关图示" class="headerlink" title="四 相关图示"></a>四 相关图示</h2><h3 id="1-平台盈利"><a href="#1-平台盈利" class="headerlink" title="1. 平台盈利"></a>1. 平台盈利</h3><p><img src="/breeze/3119132/image-20231119184529334.png" alt="image-20231119184529334"></p><h3 id="2-手动审核流程"><a href="#2-手动审核流程" class="headerlink" title="2. 手动审核流程"></a>2. 手动审核流程</h3><p><img src="/breeze/3119132/image-20231119185106344.png" alt="image-20231119185106344"></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://mliutm.github.io">清风</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://mliutm.github.io/breeze/3119132.html">https://mliutm.github.io/breeze/3119132.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://mliutm.github.io" target="_blank">清风</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a></div><div class="post_share"><div class="social-share" data-image="/img/photo-1653549892896-dde02867edee.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/breeze/78423a8.html" title="蓉车宝-店铺入驻-自定义异常-fastdfs（四）"><img class="cover" src="/img/photo-1653549892896-dde02867edee.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">蓉车宝-店铺入驻-自定义异常-fastdfs（四）</div></div></a></div><div class="next-post pull-right"><a href="/breeze/c9af289d.html" title="蓉车宝-环境搭建与组织机构管理（二）"><img class="cover" src="/img/photo-1645943020355-305df166473d.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">蓉车宝-环境搭建与组织机构管理（二）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/breeze/c8b66f0a.html" title="File类"><img class="cover" src="/img/photo-1653549892896-dde02867edee.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-15</div><div class="title">File类</div></div></a></div><div><a href="/breeze/fed4c017.html" title="IO流"><img class="cover" src="/img/photo-1645943020355-305df166473d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-15</div><div class="title">IO流</div></div></a></div><div><a href="/breeze/ecebeadb.html" title="BIO-NIO-AIO深入剖析"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-15</div><div class="title">BIO-NIO-AIO深入剖析</div></div></a></div><div><a href="/breeze/a4950fb1.html" title="Redis实战-黑马点评"><img class="cover" src="/img/photo-1645943020355-305df166473d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-24</div><div class="title">Redis实战-黑马点评</div></div></a></div><div><a href="/breeze/ab319c68.html" title="SpringCloud-Alibaba快速入门"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-13</div><div class="title">SpringCloud-Alibaba快速入门</div></div></a></div><div><a href="/breeze/4c9bef51.html" title="base抽取与代码生成器（三）"><img class="cover" src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-28</div><div class="title">base抽取与代码生成器（三）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">清风</div><div class="author-info__description">清风洒六合，邈然不可攀</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">169</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:huangpan0805@163.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E8%BD%A6%E5%AE%9D-%E5%BA%97%E9%93%BA%E5%85%A5%E9%A9%BB"><span class="toc-text">容车宝-店铺入驻</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E7%AE%80%E4%BB%8B"><span class="toc-text">一 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E9%9C%80%E6%B1%82%E4%B8%8E%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="toc-text">二 需求与业务流程分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86%E5%BA%97%E9%93%BA"><span class="toc-text">1 认识店铺</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%A5%E9%A9%BB%E6%B5%81%E7%A8%8B"><span class="toc-text">2.入驻流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="toc-text">2.1 流程分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%AE%A1%E6%A0%B8"><span class="toc-text">2.2 为什么需要审核</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%87%AA%E5%8A%A8%E5%AE%A1%E6%A0%B8"><span class="toc-text">3. 自动审核</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E5%AE%A1%E6%A0%B8"><span class="toc-text">3.1什么是自动审核</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E7%99%BE%E5%BA%A6AI-%E5%86%85%E5%AE%B9%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD"><span class="toc-text">3.2 百度AI 内容审核功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B0%8F%E7%BB%93"><span class="toc-text">4 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%AE%9E%E7%8E%B0"><span class="toc-text">三 实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BA%97%E9%93%BA%E5%85%A5%E9%A9%BB%E5%AE%9E%E7%8E%B0"><span class="toc-text">1 店铺入驻实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.1 模型设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.2 前端实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.3 后端实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE"><span class="toc-text">2 百度地图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9B%86%E6%88%90%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE"><span class="toc-text">2.1 为什么集成百度地图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0"><span class="toc-text">2.2 百度地图开发平台</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E7%99%BE%E5%BA%A6%E8%B4%A6%E5%8F%B7%E6%B3%A8%E5%86%8C"><span class="toc-text">2.2.1 百度账号注册</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text"></span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%EF%BC%8C%E7%94%B3%E8%AF%B7ak"><span class="toc-text">2.2.2 创建应用，申请ak</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEapi%E8%AE%B2%E8%A7%A3-JavaScript%E6%96%B9%E5%BC%8F%E5%BC%95%E5%85%A5"><span class="toc-text">2.2.3 百度地图api讲解 - JavaScript方式引入</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-Vue%E9%9B%86%E6%88%90%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE"><span class="toc-text">2.3 Vue集成百度地图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BA%97%E9%93%BA%E5%AE%A1%E6%A0%B8%E5%AE%9E%E7%8E%B0"><span class="toc-text">2 店铺审核实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90-1"><span class="toc-text">2.1 流程分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">2.2.1准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-1-1%E7%94%B3%E8%AF%B7%E8%B4%A6%E5%8F%B7"><span class="toc-text">2.2.1.1申请账号</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-1-2%E6%9F%A5%E7%9C%8B%E6%96%87%E6%A1%A3"><span class="toc-text">2.2.1.2查看文档</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">2.2.2.编写自己的工具类</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.3 实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1%E8%87%AA%E5%8A%A8%E5%AE%A1%E6%A0%B8"><span class="toc-text">2.3.1自动审核</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2%E6%89%8B%E5%8A%A8%E5%AE%A1%E6%A0%B8-%E8%87%AA%E5%B7%B1%E5%81%9A"><span class="toc-text">2.3.2手动审核-自己做</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%95%86%E5%AE%B6%E6%BF%80%E6%B4%BB"><span class="toc-text">3 商家激活</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%B8%9A%E5%8A%A1%E5%88%86%E6%9E%90"><span class="toc-text">3.1 业务分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%8A%80%E6%9C%AF%E5%87%86%E5%A4%87-%E9%82%AE%E4%BB%B6%E6%8A%80%E6%9C%AF"><span class="toc-text">3.2 技术准备-邮件技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">3.2.1 准备工作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%AF%BC%E5%85%A5jar"><span class="toc-text">3.2.2 创建项目导入jar</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE"><span class="toc-text">3.2.3 发送信息设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-4-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E5%85%A5%E9%97%A8"><span class="toc-text">3.2.4 发送邮件入门</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-4-1-%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6"><span class="toc-text">3.2.4.1 简单邮件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-4-2-%E5%A4%8D%E6%9D%82%E9%82%AE%E4%BB%B6"><span class="toc-text">3.2.4.2 复杂邮件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%82%AE%E4%BB%B6%E6%BF%80%E6%B4%BB%E6%89%A9%E5%B1%95"><span class="toc-text">3.3 邮件激活扩展</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E7%9B%B8%E5%85%B3%E5%9B%BE%E7%A4%BA"><span class="toc-text">四 相关图示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B9%B3%E5%8F%B0%E7%9B%88%E5%88%A9"><span class="toc-text">1. 平台盈利</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%89%8B%E5%8A%A8%E5%AE%A1%E6%A0%B8%E6%B5%81%E7%A8%8B"><span class="toc-text">2. 手动审核流程</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/breeze/1d13ce0d.html" title="WYDG-产品目录列表-20200506"><img src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="WYDG-产品目录列表-20200506"></a><div class="content"><a class="title" href="/breeze/1d13ce0d.html" title="WYDG-产品目录列表-20200506">WYDG-产品目录列表-20200506</a><time datetime="2025-04-13T05:43:05.000Z" title="发表于 2025-04-13 13:43:05">2025-04-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/6f268337.html" title="雨雀文件下载"><img src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="雨雀文件下载"></a><div class="content"><a class="title" href="/breeze/6f268337.html" title="雨雀文件下载">雨雀文件下载</a><time datetime="2024-05-22T12:25:08.000Z" title="发表于 2024-05-22 20:25:08">2024-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/7832219d.html" title="十万字面试总结"><img src="/img/photo-1688475747590-d0db5e2412cb.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="十万字面试总结"></a><div class="content"><a class="title" href="/breeze/7832219d.html" title="十万字面试总结">十万字面试总结</a><time datetime="2024-02-29T02:50:00.000Z" title="发表于 2024-02-29 10:50:00">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/7ae0ca37.html" title="Redis_30道经典面试题"><img src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis_30道经典面试题"></a><div class="content"><a class="title" href="/breeze/7ae0ca37.html" title="Redis_30道经典面试题">Redis_30道经典面试题</a><time datetime="2024-02-29T02:45:00.000Z" title="发表于 2024-02-29 10:45:00">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/2a548e97.html" title="面试实战"><img src="/img/photo-1688475747590-d0db5e2412cb.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="面试实战"></a><div class="content"><a class="title" href="/breeze/2a548e97.html" title="面试实战">面试实战</a><time datetime="2024-02-29T02:43:59.000Z" title="发表于 2024-02-29 10:43:59">2024-02-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/photo-1653549892896-dde02867edee.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 <i id="heartbeat" class="fa fas fa-heartbeat"></i> 清风</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="/js/timing.js"></script><script id="canvas_nest" defer color="255,0,255" opacity="0.7" zindex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="天枢,天璇,天玑,天权,玉衡,开阳,瑶光" data-fontsize="15px" data-random="true" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>