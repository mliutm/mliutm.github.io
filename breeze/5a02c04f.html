<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>springcloud快速入门-微服务介绍-eureka（一） | 清风</title><meta name="author" content="清风"><meta name="copyright" content="清风"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.介绍 为什么需要spring cloud;（理解-重要）  spring cloud概述;（理解）  spring cloud入门-环境准备;（掌握）  spring cloud入门-注册中心-Eureka-单机;（掌握）  spring cloud入门-注册中心-Eureka-集群（掌握）   2.为什么需要spring cloud2.1.Monolith（单体应用）架构2.1.1. *什么"><meta property="og:type" content="article"><meta property="og:title" content="springcloud快速入门-微服务介绍-eureka（一）"><meta property="og:url" content="https://mliutm.github.io/breeze/5a02c04f.html"><meta property="og:site_name" content="清风"><meta property="og:description" content="1.介绍 为什么需要spring cloud;（理解-重要）  spring cloud概述;（理解）  spring cloud入门-环境准备;（掌握）  spring cloud入门-注册中心-Eureka-单机;（掌握）  spring cloud入门-注册中心-Eureka-集群（掌握）   2.为什么需要spring cloud2.1.Monolith（单体应用）架构2.1.1. *什么"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mliutm.github.io/img/premium_photo-1695185954894-e9382c6f4da8.jpg"><meta property="article:published_time" content="2023-11-23T11:37:06.000Z"><meta property="article:modified_time" content="2023-11-25T05:15:47.885Z"><meta property="article:author" content="清风"><meta property="article:tag" content="springcloud"><meta property="article:tag" content="eureka"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://mliutm.github.io/img/premium_photo-1695185954894-e9382c6f4da8.jpg"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://mliutm.github.io/breeze/5a02c04f.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!1,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"springcloud快速入门-微服务介绍-eureka（一）",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-11-25 13:15:47"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">169</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/premium_photo-1695185954894-e9382c6f4da8.jpg)"><nav id="nav"><span id="blog-info"><a href="/" title="清风"><span class="site-name">清风</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">springcloud快速入门-微服务介绍-eureka（一）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-23T11:37:06.000Z" title="发表于 2023-11-23 19:37:06">2023-11-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-25T05:15:47.885Z" title="更新于 2023-11-25 13:15:47">2023-11-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SpringCloud/">SpringCloud</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="springcloud快速入门-微服务介绍-eureka（一）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><ol><li><p>为什么需要spring cloud;（理解-重要）</p></li><li><p>spring cloud概述;（理解）</p></li><li><p>spring cloud入门-环境准备;（掌握）</p></li><li><p>spring cloud入门-注册中心-Eureka-单机;（掌握）</p></li><li><p>spring cloud入门-注册中心-Eureka-集群（掌握）</p></li></ol><h2 id="2-为什么需要spring-cloud"><a href="#2-为什么需要spring-cloud" class="headerlink" title="2.为什么需要spring cloud"></a>2.为什么需要spring cloud</h2><h3 id="2-1-Monolith（单体应用）架构"><a href="#2-1-Monolith（单体应用）架构" class="headerlink" title="2.1.Monolith（单体应用）架构"></a>2.1.Monolith（单体应用）架构</h3><h4 id="2-1-1-什么是单体应用"><a href="#2-1-1-什么是单体应用" class="headerlink" title="2.1.1. *什么是单体应用*"></a><strong>2.1.1.</strong> <em><strong>*什么是单体应用*</strong></em></h4><p>首先请回想一下我们所开发的服务是什么样子的。通常情况下，这个服务所对应的代码由多个项目（模块）所组成，各个项目会根据自身所提供功能的不同具有一个明确的边界。在编译时，这些项目将被打包成为一个JAR包。接下来，我们需要将该WAR包上传到Web容器中，解压该WAR包，并重新启动服务器。在执行完这一系列操作之后，我们对服务的编译及部署就已经完成了。这种将所有的代码及功能都包含在一个WAR包中的项目组织方式被称为Monolith</p><p><img src="/breeze/5a02c04f/wps1.jpg" alt="img"></p><h4 id="2-1-2-缺点"><a href="#2-1-2-缺点" class="headerlink" title="2.1.2. *缺点*"></a><strong>2.1.2.</strong> <em><strong>*缺点*</strong></em></h4><p>​ 在项目规模很小的情况下这种单体应用比较简单，但是随着项目越变越大，代码越来越多。就会存在以下缺点。</p><p>​ ①编译难，部署难，测试难</p><p>​ 代码量变多，即使更改一行代码，也需花大量时间编译，部署前要编译打包，解压等所以部署难，部署完了还要测试所以测试难。</p><p>​ ②技术选择难</p><p>​ 在变得越来越大的同时，我们的应用所使用的技术也会变得越来越多。这些技术有些是不兼容的，就比如在一个项目中大范围地混合使用C++和Java几乎是不可能的事情。在这种情况下，我们就需要抛弃对某些不兼容技术的使用，而选择一种不是那么适合的技术来实现特定的功能。</p><p>​ ③扩展难</p><p>​ 按照Monolith组织的代码将只产生一个包含了所有功能的WAR包，因此在对服务的容量进行扩展的时候，我们只能选择重复地部署这些WAR包来扩展服务能力，而不是仅仅扩展出现系统瓶颈的组成：</p><p>​ <img src="/breeze/5a02c04f/wps2.jpg" alt="img"></p><p>​ 是这种扩展方式极大地浪费了资源。就以上图所展示的情况为例：在一个服务中，某个组成的负载已经达到了90%，也就是到了不得不对服务能力进行扩容的时候了。而同一服务的其它三个组成的负载还没有到其处理能力的20%。由于Monolith服务中的各个组成是打包在同一个WAR包中的，因此通过添加一个额外的服务实例虽然可以将需要扩容的组成的负载降低到了45%，但是也使得其它各组成的利用率更为低下。</p><p>​ ④耦合度太强</p><p>​ 一挂全挂!所有模块都耦合在一个monolith中.</p><h3 id="2-2-MicroService-微服务-架构"><a href="#2-2-MicroService-微服务-架构" class="headerlink" title="2.2. MicroService(微服务)架构"></a>2.2. MicroService(微服务)架构</h3><h4 id="2-2-1-为什么需要"><a href="#2-2-1-为什么需要" class="headerlink" title="2.2.1. 为什么需要"></a>2.2.1. 为什么需要</h4><p>​ 使用微服务架构就可以解决单体项目缺点。</p><h4 id="2-2-2-什么是MicroService架构"><a href="#2-2-2-什么是MicroService架构" class="headerlink" title="2.2.2.什么是MicroService架构"></a>2.2.2.什么是MicroService架构</h4><p>​ 微服务架构是一种架构模式，它提倡将单一应用程序划分成一组小的服务，服务之间互相协调、互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务间采用轻量级的通信机制互相沟通（通常是基于HTTP的RESTful API）。每个服务都围绕着具体业务进行构建，并且能够被独立地部署到生产环境、类生产环境等。另外，应尽量避免统一的、集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具对其进行构建。</p><p>微服务架构是一种架构风格，一个大型复杂软件应由多个微服务组成。系统中的各个微服务可被独立技术选型,独立开发,独立部署,独立运维，各个微服务之间是松耦合的。每个微服务仅关注于完成一件任务并很好地完成该任务。在所有情况下，每个任务代表着一个小的业务能力。 由各个微服务提供功能最终组成完整功能。</p><p><img src="/breeze/5a02c04f/wps3.jpg" alt="img"></p><p><img src="/breeze/5a02c04f/wps4.jpg" alt="img"></p><h4 id="2-2-3-优势"><a href="#2-2-3-优势" class="headerlink" title="2.2.3.优势"></a>2.2.3.优势</h4><p>复杂度可控：</p><p>在将应用分解的同时，规避了原本复杂度无止境的积累。每一个微服务专注于单一功能，并通过定义良好的接口清晰表述服务边界。由于体积小、复杂度低，每个微服务可由一个小规模开发团队完全掌控，易于保持高可维护性和开	发效率。</p><p>独立性：</p><p>由于微服务具备独立的运行进程，所以每个微服务也可以独立部署。当某个微服务发生变更时无需编译、部署整个应用。由微服务组成的应用相当于具备一系列可并行的发布流程，使得发布更加高效，同时降低对生产环境所造成的风险，最终缩短应用交付周期。</p><p>技术选型灵活：</p><p>微服务架构下，技术选型是去中心化的。每个团队可以根据自身服务的需求和行业发展的现状，自由选择最适合的技术栈。由于每个微服务相对简单，故需要对技术栈进行升级时所面临的风险就较低，甚至完全重构一个微服务也是可行的。</p><p>容错：</p><p>当某一组建发生故障时，在单一进程的传统架构下，故障很有可能在进程内扩散，形成应用全局性的不可用。在微服务架构下，故障会被隔离在单个服务中。若设计良好，其他服务可通过重试、平稳退化等机制实现应用层面的容错。</p><p>扩展：</p><p>单块架构应用也可以实现横向扩展，就是将整个应用完整的复制到不同的节点。当应用的不同组件在扩展需求上存在差异时，微服务架构便体现出其灵活性，因为每个服务可以根据实际需求独立进行扩展。</p><p><img src="/breeze/5a02c04f/wps5.jpg" alt="img"></p><h4 id="2-2-4-微服务间远程调用方式"><a href="#2-2-4-微服务间远程调用方式" class="headerlink" title="2.2.4. 微服务间远程调用方式"></a>2.2.4. 微服务间远程调用方式</h4><p>在微服务中服务间的远程调用。那么服务间的远程调用方式有哪些呢？</p><p>常见的远程调用方式有以下几种：</p><p>- RPC：Remote Produce Call远程过程调用，类似的还有RMI。自定义数据格式，基于原生TCP通信，速度快，效率高,但是复杂度高。早期的webservice，现在热门的dubbo,thrift，都是RPC的典型</p><p>- Http：http其实是一种网络传输协议，基于TCP，规定了数据传输的格式。现在客户端浏览器与服务端通信基本都是采用Http协议。也可以用来进行远程服务调用。缺点是消息封装臃肿。</p><p>现在热门的Rest风格，就可以通过http协议来实现 springcloud</p><h4 id="2-2-4-1认识RPC"><a href="#2-2-4-1认识RPC" class="headerlink" title="2.2.4.1认识RPC"></a>2.2.4.1认识RPC</h4><p>RPC，即 Remote Procedure Call（远程过程调用），是一个计算机通信协议。 该协议允许运行于一台计算机的程序调用另一台计算机的子程序，而程序员无需额外地为这个交互作用编程。说得通俗一点就是：A计算机提供一个服务，B计算机可以像调用本地服务那样调用A计算机的服务。</p><p>通过上面的概念，我们可以知道，实现RPC主要是做到两点：</p><p>- 实现远程调用其他计算机的服务</p><p>- 要实现远程调用，肯定是通过网络传输数据。A程序提供服务，B程序通过网络将请求参数传递给A，A本地执行后得到结果，再将结果返回给B程序。这里需要关注的有两点：</p><p>- 1）采用何种网络通讯协议？</p><p>- 现在比较流行的RPC框架，都会采用TCP作为底层传输协议</p><p>- 2）数据传输的格式怎样？</p><p>- 两个程序进行通讯，必须约定好数据传输格式。就好比两个人聊天，要用同一种语言，否则无法沟通。所以，我们必须定义好请求和响应的格式。另外，数据在网路中传输需要进行序列化，所以还需要约定统一的序列化的方式。</p><p>- 像调用本地服务一样调用远程服务</p><p>- 如果仅仅是远程调用，还不算是RPC，因为RPC强调的是过程调用，调用的过程对用户而言是应该是透明的，用户不应该关心调用的细节，可以像调用本地服务一样调用远程服务。所以RPC一定要对调用的过程进行封装</p><p>RPC调用流程图：</p><p><img src="/breeze/5a02c04f/wps6.jpg" alt="img"></p><h4 id="2-2-4-2-认识Http"><a href="#2-2-4-2-认识Http" class="headerlink" title="2.2.4.2.认识Http"></a>2.2.4.2.认识Http</h4><p>Http协议：超文本传输协议，是一种应用层协议。规定了网络传输的请求格式、响应格式、资源定位和操作的方式等。但是底层采用什么网络传输协议，并没有规定，不过现在都是采用TCP协议作为底层传输协议。说到这里，大家可能觉得，Http与RPC的远程调用非常像，都是按照某种规定好的数据格式进行网络通信，有请求，有响应。没错，在这点来看，两者非常相似，但是还是有一些细微差别。</p><p>- RPC并没有规定数据传输格式，这个格式可以任意指定，不同的RPC协议，数据格式不一定相同。</p><p>- Http中还定义了资源定位的路径，RPC中并不需要</p><p>- 最重要的一点：RPC需要满足像调用本地服务一样调用远程服务，也就是对调用过程在API层面进行封装。Http协议没有这样的要求，因此请求、响应等细节需要我们自己去实现。</p><p>- 优点：RPC方式更加透明，对用户更方便。Http方式更灵活，没有规定API和语言，跨语言、跨平台</p><p>- 缺点：RPC方式需要在API层面进行封装，限制了开发的语言环境。</p><p>例如我们通过浏览器访问网站，就是通过Http协议。只不过浏览器把请求封装，发起请求以及接收响应，解析响应的事情都帮我们做了。如果是不通过浏览器，那么这些事情都需要自己去完成。</p><p><img src="/breeze/5a02c04f/wps7.jpg" alt="img"></p><h4 id="2-2-4-3如何选择"><a href="#2-2-4-3如何选择" class="headerlink" title="2.2.4.3如何选择"></a>2.2.4.3如何选择</h4><p>既然两种方式都可以实现远程调用，我们该如何选择呢？</p><p>- 速度来看，RPC要比http更快，虽然底层都是TCP，但是http协议的信息往往比较臃肿，不过可以采用gzip压缩。</p><p>- 难度来看，RPC实现较为复杂，http相对比较简单</p><p>- 灵活性来看，http更胜一筹，因为它不关心实现细节，跨平台、跨语言。</p><p>因此，两者都有不同的使用场景：</p><p>- 如果对效率要求更高，并且开发过程使用统一的技术栈，那么用RPC还是不错的。 dubbo</p><p>- 如果需要更加灵活，跨语言、跨平台，显然http更合适 springcloud</p><p>那么我们该怎么选择呢？</p><p>微服务，更加强调的是独立、自治、灵活。而RPC方式的限制较多，因此微服务框架中，一般都会采用基于Http的Rest风格服务。</p><h4 id="2-2-4-4Http客户端工具"><a href="#2-2-4-4Http客户端工具" class="headerlink" title="2.2.4.4Http客户端工具"></a>2.2.4.4Http客户端工具</h4><p>既然Springclud微服务选择了Http，那么我们就需要考虑自己来实现对请求和响应的处理。不过开源世界已经有很多的http客户端工具，能够帮助我们做这些事情，例如：</p><p>- HttpClient</p><p>- OKHttp</p><p>- URLConnection</p><p>-Spring的RestTemplate</p><p>Spring提供了一个RestTemplate模板工具类，对基于Http的客户端进行了封装，并且实现了对象与json的序列化和反序列化，非常方便。RestTemplate并没有限定Http的客户端类型，而是进行了抽象，目前常用的3种都有支持：</p><p>- HttpClient</p><p>- OkHttp</p><p>- JDK原生的URLConnection（默认）</p><p><img src="/breeze/5a02c04f/wps8.jpg" alt="img"></p><p><img src="/breeze/5a02c04f/wps9.jpg" alt="img"></p><p>先简单认识，后面使用</p><h3 id="2-3-MonolithµSrvice使用场景"><a href="#2-3-MonolithµSrvice使用场景" class="headerlink" title="2.3.MonolithµSrvice使用场景"></a>2.3.MonolithµSrvice使用场景</h3><h4 id="2-3-1-选择依据"><a href="#2-3-1-选择依据" class="headerlink" title="2.3.1.*选择依据"></a>2.3.1.*选择依据</h4><p>既然微服务架构这个NB，那么是否所有项目都适用呢？</p><p><img src="/breeze/5a02c04f/wps10.jpg" alt="img"></p><p>从上图中可以看到，在刚开始的阶段，使用Microservice架构模式开发应用的效率明显低于Monolith。但是随着应用规模的增大，基于Microservice架构模式的开发效率将明显上升，而基于Monolith模式开发的效率将逐步下降。</p><p>这是因为Microservice是一个架构模式，而不是一个特定的技术解决方案。其并不会将开发中的各个难点全部转移，而只是允许通过更为合适的技术来适当简化单个子服务的开发，或者绕过开发中可能遇到的部分难点。但是为了支持各个子服务的运行，我们还需要创建一系列公共服务。这些公共服务需要在编写第一个子服务的同时进行。这是导致Microservice架构模式在开发初期会具有较低效率的一个原因。</p><p>然而使用特定技术并不会绕过开发中所能遇到的所有难点。由于在Microservice架构中，各个子服务都集中精力处理本身的业务逻辑，而所有的公共功能都交由公共服务来完成，因此公共服务在保持和各个子服务的松耦合性的同时还需要提供一个足够通用的，能够在一定程度上满足所有当前和未来子服务要求的解决方案。而这也是导致Microservice架构模式在开发初期会具有较低效率的另外一个原因。</p><p>而在开发的后期，随着Monolith模式中应用的功能逐渐变大，增加一个新的功能会影响到该应用中的很多地方，因此其开发效率会越来越差。反过来，由于Microservice架构模式中的各个子服务所依赖的公共服务已经完成，而且子服务本身可以选择适合自己的实现技术，因此子服务的实现通常只需要关注自身的业务逻辑即可。这也是Microservice架构模式在后期具有较高效率的原因。</p><p>当我们再次通过Microservice架构模式搭建应用的时候，其在开发时的效率劣势也将消失，原因就是因为在前一次基于Microservice架构模式开发的时候，我们已经创建过一次公共服务，因此在这个新的应用中，我们将这些公共服务拿来并稍事改动即可：</p><h4 id="2-3-2-选型"><a href="#2-3-2-选型" class="headerlink" title="2.3.2.选型"></a>2.3.2.选型</h4><p>​ 单体应用架构：中小型项目(功能相对较少),公司官网，管理系统（学生管理，CRM，OA，财务系统）等。</p><p>​</p><p>​ 微服务架构：大型项目（功能比较多） 商城 erp,容车宝等-互联网项目</p><p>我一开始怎么知道项目规模大小的？最开始不知道情况下</p><p>​ 1）单体—&gt;微服务</p><p>​ 2）领导强制要求微服务架构</p><p>​ 3）做一个只有一个微服务的微服务</p><p>​ 如果识别出来以后功能也他妈没那么多！直接单体，除非领导强制要求微服务架构</p><p>。 识别出来以后可能代码规模大，根据公司人力、物力、财力、技术能力。来选择，都高的情况下，直接使用微服务架构，否则先单体或一个微服务的微服务架构。 暂时和你没关系，架构师说了算。</p><p>​</p><h3 id="2-4-MicroService实现技术方案"><a href="#2-4-MicroService实现技术方案" class="headerlink" title="2.4.MicroService实现技术方案"></a>2.4.MicroService实现技术方案</h3><p>spring微服务解决方案：（中小型企业用）</p><p>Springcloud netflix</p><p>Springcloud alibaba</p><p>alibaba Dubbo</p><p>Kubernates-k8s-中型</p><p>Service mesh-istio（一般人玩不起，大厂基本在玩）</p><h4 id="2-4-1-MicroService只是一种架构思想"><a href="#2-4-1-MicroService只是一种架构思想" class="headerlink" title="2.4.1.MicroService只是一种架构思想"></a>2.4.1.MicroService只是一种架构思想</h4><p>​ 是一种架构的理念，提出了微服务的设计原则，从理论为具体的技术落地提供了指导思想。</p><h4 id="2-4-2-实现技术-springboot"><a href="#2-4-2-实现技术-springboot" class="headerlink" title="2.4.2.实现技术-springboot"></a>2.4.2.实现技术-springboot</h4><p>​ Java中可以使用传统ssm ssj等架构，当然更加推荐Springboot。Spring Boot是一套快速配置脚手架，可以基于Spring Boot快速开发单个微服务；</p><h4 id="2-4-3-服务治理框架"><a href="#2-4-3-服务治理框架" class="headerlink" title="2.4.3.服务治理框架"></a>2.4.3.服务治理框架</h4><p>​ 由于微服务架构中存在多个微服务，那么如何管理和协调这些服务呢？就需要服务治理框架，而springcloud就是一个基于Spring Boot实现的服务治理工具包。</p><p>微服务架构是一种思想，需要技术落地，在spring微服务解决方案中，springboot使用用来实现单个服务，而服务间协调调用要使用服务治理框架springcloud来实现。并且springcloud有两个版本:springcloud netflix和Springcloud alibaba</p><h3 id="2-5-小结"><a href="#2-5-小结" class="headerlink" title="2.5.小结"></a>2.5.小结</h3><p>相较于单体应用这个架构模式，微服务架构更加适用于大型项目，虽然刚开始成本高，但是随着项目开展成本会变得越来越低。并且微服务只是一种架构思想，具体可以通过springboot快速开发一个单一服务，但是多个服务协调管理，就需要服务治理框架springcloud等。</p><h2 id="3-Spring-cloud-netflix概述"><a href="#3-Spring-cloud-netflix概述" class="headerlink" title="3.Spring cloud netflix概述"></a>3.Spring cloud netflix概述</h2><h3 id="3-1-是什么"><a href="#3-1-是什么" class="headerlink" title="3.1.是什么"></a>3.1.是什么</h3><p>Spring cloud是一个基于Spring Boot实现的服务治理工具包，用于微服务架构中管理和协调各个服务的。</p><h3 id="3-2-组成部分"><a href="#3-2-组成部分" class="headerlink" title="3.2.组成部分"></a>3.2.组成部分</h3><p>Spring Cloud是一系列框架的有序集合。它利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用Spring Boot的开发风格做到一键启动和部署。Springcloud并没有重复制造轮子，它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组合起来，通过Spring Boot风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。</p><p>以下是主要组成部分：</p><p><img src="/breeze/5a02c04f/wps11.jpg" alt="img"></p><p>所有组成。19个</p><p>Spring Cloud共集成了19个子项目，里面都包含一个或者多个第三方的组件或者框架！</p><p>Spring Cloud 工具框架</p><p>1、Spring Cloud Config 配置中心，利用git集中管理程序的配置。</p><p>2、Spring Cloud Netflix 集成众多Netflix的开源软件</p><p>3、Spring Cloud Bus 消息总线，利用分布式消息将服务和服务实例连接在一起，用于在一个集群中传播状态的变化</p><p>4、Spring Cloud for Cloud Foundry 利用Pivotal Cloudfoundry集成你的应用程序</p><p>5、Spring Cloud Cloud Foundry Service Broker 为建立管理云托管服务的服务代理提供了一个起点。</p><p>6、Spring Cloud Cluster 基于Zookeeper, Redis, Hazelcast, Consul实现的领导选举和平民状态模式的抽象和实现。</p><p>7、Spring Cloud Consul 基于Hashicorp Consul实现的服务发现和配置管理。</p><p>8、Spring Cloud Security 在Zuul代理中为OAuth2 rest客户端和认证头转发提供负载均衡</p><p>9、Spring Cloud Sleuth SpringCloud应用的分布式追踪系统，和Zipkin，HTrace，ELK兼容。</p><p>10、Spring Cloud Data Flow 一个云本地程序和操作模型，组成数据微服务在一个结构化的平台上。</p><p>11、Spring Cloud Stream 基于Redis,Rabbit,Kafka实现的消息微服务，简单声明模型用以在Spring Cloud应用中收发消息。</p><p>12、Spring Cloud Stream App Starters 基于Spring Boot为外部系统提供spring的集成</p><p>13、Spring Cloud Task 短生命周期的微服务，为SpringBooot应用简单声明添加功能和非功能特性。</p><p>14、Spring Cloud Task App Starters</p><p>15、Spring Cloud Zookeeper 服务发现和配置管理基于Apache Zookeeper。</p><p>16、Spring Cloud for Amazon Web Services 快速和亚马逊网络服务集成。</p><p>17、Spring Cloud Connectors 便于PaaS应用在各种平台上连接到后端像数据库和消息经纪服务。</p><p>18、Spring Cloud Starters （项目已经终止并且在Angel.SR2后的版本和其他项目合并）</p><p>19、Spring Cloud CLI 插件用Groovy快速的创建Spring Cloud组件应用。</p><p>当然也在不断增加。。。。</p><p>五大神兽（组件）：</p><p>服务注册发现(注册中心)——Netflix Eureka ： 帮我们管理服务的通信地址(ip，端口)</p><p>客户端负载均衡——Netflix Ribbon\Open Feign ： 解决服务负载均衡调用的</p><p>断路器——Netflix Hystrix ：解决微服务故障的，保护微服务的</p><p>服务网关——Netflix Zuul ：统一访问入口，微服务的大门(安保部门)</p><p>分布式配置——Spring Cloud Config ：统一管理微服务的配置</p><p>springcloud Netflix:市面上用的比较少了，<strong>Netflix</strong>已经没有开源精神。</p><p>springcloud alibaba:以后的趋势，特别是在国内。</p><h3 id="3-3-Spring-cloud-pk-dubbo"><a href="#3-3-Spring-cloud-pk-dubbo" class="headerlink" title="3.3.Spring cloud pk dubbo"></a>3.3.Spring cloud pk dubbo</h3><p>1)从两个公司的背景来谈：Dubbo，是阿里巴巴服务化治理的核心框架，并被广泛应用于中国各互联网公司；Spring Cloud是大名鼎鼎的Spring家族的产品。阿里巴巴是一个商业公司，虽然也开源了很多的顶级的项目，但从整体战略上来讲，仍然是服务于自身的业务为主。Spring专注于企业级开源框架的研发，不论是在中国还是在世界上使用都非常广泛，开发出通用、开源、稳健的开源框架就是他们的主业。</p><p>2）从社区活跃度这个角度来对比，Dubbo虽然也是一个非常优秀的服务治理框架，并且在服务治理、灰度发布、流量分发这方面做的比Spring Cloud还好，除过当当网在基础上增加了rest支持外，已有两年多的时间几乎都没有任何更新了。在使用过程中出现问题，提交到github的Issue也少有回复。</p><p>相反Spring Cloud自从发展到现在，仍然在不断的高速发展，从github上提交代码的频度和发布版本的时间间隔就可以看出，现在Spring Cloud即将发布2.0版本，到了后期会更加完善和稳定。</p><p>3）从整个大的平台架构来讲，dubbo框架只是专注于服务之间的治理，如果我们需要使用配置中心、分布式跟踪这些内容都需要自己去集成，这样无形中使用dubbo的难度就会增加。Spring Cloud几乎考虑了服务治理的方方面面，更有Spring Boot这个大将的支持，开发起来非常的便利和简单。</p><p>4）从技术发展的角度来讲，Dubbo刚出来的那会技术理念还是非常先进，解决了各大互联网公司服务治理的问题，中国的各中小公司也从中受益不少。经过了这么多年的发展，互联网行业也是涌现了更多先进的技术和理念，Dubbo一直停滞不前，自然有些掉队，有时候我个人也会感到有点可惜，如果Dubbo一直沿着当初的那个路线发展，并且延伸到周边，今天可能又是另一番景象了。</p><p>Spring 推出Spring Boot&#x2F;Cloud也是因为自身的很多原因。Spring最初推崇的轻量级框架，随着不断的发展也越来越庞大，随着集成项目越来越多，配置文件也越来越混乱，慢慢的背离最初的理念。随着这么多年的发展，微服务、分布式链路跟踪等更多新的技术理念的出现，Spring急需一款框架来改善以前的开发模式，因此才会出现Spring Boot&#x2F;Cloud项目，我们现在访问Spring官网，会发现Spring Boot和Spring Cloud已经放到首页最重点突出的三个项目中的前两个，可见Spring对这两个框架的重视程度。</p><p>总结一下，dubbo曾经确实很牛逼，但是Spring Cloud Netflix是站在近些年技术发展之上进行开发，因此更具技术代表性。但是很不幸,它很少维护开源版本.springcloud alibaba,是阿里巴巴捐献给spring.</p><h3 id="3-4-总结"><a href="#3-4-总结" class="headerlink" title="3.4.总结"></a>3.4.总结</h3><p>Spring cloud是微服务架构中服务治理工具集，有很多产品组成。核心为五大神兽。相较于dubbo更加靠谱。</p><h2 id="4-微服务场景模拟-入门"><a href="#4-微服务场景模拟-入门" class="headerlink" title="4.微服务场景模拟-入门"></a>4.微服务场景模拟-入门</h2><p>服务提供者：order-service-2010</p><p>服务消费者：user-service-3010</p><h3 id="4-1-引入"><a href="#4-1-引入" class="headerlink" title="4.1.引入"></a>4.1.引入</h3><p>前面已经理解了一些关于spring cloud的理论介绍，接下来就来搭建一个服务调用案例，以便以后学习微服务架构。当然入门都需要一些步骤：</p><p>1）搭建环境</p><p>​ 以maven多模块化的方法搭建</p><p>2）服务提供者&#x3D;提供服务</p><p>3）服务消费者-调用服务</p><p><img src="/breeze/5a02c04f/wps12.jpg" alt="img"></p><h3 id="4-2-搭建环境"><a href="#4-2-搭建环境" class="headerlink" title="4.2.搭建环境"></a>4.2.搭建环境</h3><h4 id="4-2-1-Idea创建springboot项目"><a href="#4-2-1-Idea创建springboot项目" class="headerlink" title="4.2.1.Idea创建springboot项目"></a>4.2.1.Idea创建springboot项目</h4><ol><li><p>普通maven 项目</p></li><li><p>Spring-initatier</p></li></ol><p><img src="/breeze/5a02c04f/wps13.jpg" alt="img"></p><p>但是不支持模块管理，需要手动处理</p><h4 id="4-2-2-结构分析"><a href="#4-2-2-结构分析" class="headerlink" title="4.2.2.结构分析"></a>4.2.2.结构分析</h4><p><img src="/breeze/5a02c04f/wps14.jpg" alt="img"></p><ol><li><p>order_interface&#x2F;facade&#x2F;common 公共代码</p></li><li><p>domain,query,接口,util</p></li><li><p>​	order-service-2010:服务提供者</p></li><li><p>public Order getOrderByUserId</p></li><li><p>user-service-3010:服务消费着</p></li><li><p>Order order &#x3D; 远程调用</p></li></ol><h4 id="4-2-3-搭建父模块"><a href="#4-2-3-搭建父模块" class="headerlink" title="4.2.3.搭建父模块"></a>4.2.3.搭建父模块</h4><p>Parent:</p><p>限定springboot版本</p><p>限定springcloud版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.cloud.version</span>&gt;</span>Hoxton.SR3<span class="tag">&lt;/<span class="name">spring.cloud.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/breeze/5a02c04f/wps15.jpg" alt="img"></p><h3 id="4-3-服务提供者"><a href="#4-3-服务提供者" class="headerlink" title="4.3.服务提供者"></a>4.3.服务提供者</h3><h4 id="4-3-1-工程搭建"><a href="#4-3-1-工程搭建" class="headerlink" title="4.3.1.工程搭建"></a>4.3.1.工程搭建</h4><ol><li>order_interface&#x2F;facade 公共代码</li><li>domain,query,接口,util</li><li>order-service-2010:服务提供者</li><li>public Order getOrderByUserId</li></ol><h4 id="4-3-2-导入jar"><a href="#4-3-2-导入jar" class="headerlink" title="4.3.2.导入jar"></a>4.3.2.导入jar</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--公共代码依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.ronghuanet.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>order-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--springboot支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-3-3-Yml配置"><a href="#4-3-3-Yml配置" class="headerlink" title="4.3.3.Yml配置"></a>4.3.3.Yml配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">2010</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">order-service#不要使用下划线</span></span><br></pre></td></tr></table></figure><h4 id="4-3-4-入口类"><a href="#4-3-4-入口类" class="headerlink" title="4.3.4.入口类"></a>4.3.4.入口类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceStart</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OrderServiceStart.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-5-写服务代码"><a href="#4-3-5-写服务代码" class="headerlink" title="4.3.5.写服务代码"></a>4.3.5.写服务代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/order&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注入service</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;userId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">getOrderByUserId</span><span class="params">(<span class="meta">@PathVariable(&quot;userId&quot;)</span>Long userId)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以后要调用service，并且service要调用mapper获取数据。</span></span><br><span class="line">        <span class="comment">// 但是现在我们只是模拟，直接new返回就好</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Order</span>(<span class="number">1L</span>, <span class="string">&quot;用户id为&quot;</span>+userId+<span class="string">&quot;的订单&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-6-测试"><a href="#4-3-6-测试" class="headerlink" title="4.3.6.测试"></a>4.3.6.测试</h4><p>http调用</p><p><a target="_blank" rel="noopener" href="http://localhost:2010/order/user/1">http://localhost:2010/order/user/1</a></p><h3 id="4-4-服务消费者"><a href="#4-4-服务消费者" class="headerlink" title="4.4.服务消费者"></a>4.4.服务消费者</h3><h4 id="4-4-1-创建项目"><a href="#4-4-1-创建项目" class="headerlink" title="4.4.1.创建项目"></a>4.4.1.创建项目</h4><p>user-service-2020:服务消费者</p><p>Order order&#x3D; 调用代码</p><h4 id="4-4-2-导入jar"><a href="#4-4-2-导入jar" class="headerlink" title="4.4.2.导入jar"></a>4.4.2.导入jar</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--公共代码依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.ronghuanet.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>order-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--springboot支持--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-4-3-配置yml"><a href="#4-4-3-配置yml" class="headerlink" title="4.4.3.配置yml"></a>4.4.3.配置yml</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">2020</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user-service</span></span><br></pre></td></tr></table></figure><h4 id="4-4-4-入口类"><a href="#4-4-4-入口类" class="headerlink" title="4.4.4.入口类"></a>4.4.4.入口类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.ronghuanet.springcloud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserConsumerAppliction_9001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(UserConsumerAppliction_9001.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-5-调用接口"><a href="#4-4-5-调用接口" class="headerlink" title="4.4.5.调用接口"></a>4.4.5.调用接口</h4><p><strong>config</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// &lt;beans&gt;&lt;/beans&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CfgBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//&lt;bean class=&quot;org.springframework.web.client.RestTemplate&quot;&gt;&lt;/bean&gt;</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/consumer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//多个方法调用只需改一处就ok</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">URL_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8001&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Long id)</span>&#123;</span><br><span class="line">        <span class="comment">//调用远程服务 http请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> URL_PREFIX+<span class="string">&quot;/provider/user/&quot;</span>+id;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(url,User.class );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个简单的远程服务调用案例就实现了。</p><h4 id="4-4-6-测试"><a href="#4-4-6-测试" class="headerlink" title="4.4.6.测试"></a>4.4.6.测试</h4><p>正常来说可以通过:<a target="_blank" rel="noopener" href="http://localhost:9001/consumer/user/1">http://localhost:9001/consumer/user/1</a> 来进行测试了，但是有强依赖问题。</p><h3 id="4-5-总结"><a href="#4-5-总结" class="headerlink" title="4.5. 总结"></a><strong>4.5.</strong> 总结</h3><p>通过springboot实现服务提供者，然后再服务消费者以restTemplate以restful的方式完成服务调用。</p><h2 id="5-Eureka注册中心-入门"><a href="#5-Eureka注册中心-入门" class="headerlink" title="5. Eureka注册中心-入门"></a><strong>5.</strong> Eureka注册中心-入门</h2><h3 id="5-1-介绍"><a href="#5-1-介绍" class="headerlink" title="5.1. 介绍"></a><strong>5.1.</strong> 介绍</h3><h4 id="5-1-1-为什么需要需要服务注册中心"><a href="#5-1-1-为什么需要需要服务注册中心" class="headerlink" title="5.1.1.为什么需要需要服务注册中心"></a>5.1.1.为什么需要需要服务注册中心</h4><p>简单回顾一下，刚才我们写了什么：</p><p>- order-server：一个提供根据用户id查询订单的微服务</p><p>- user-server：一个服务调用者，通过RestTemplate远程调用order-service</p><p>流程如下：</p><p><img src="/breeze/5a02c04f/wps16.jpg" alt="img"></p><p>存在什么问题？</p><p>- 在user-server中，我们把url地址硬编码到了代码中，不方便后期维护</p><p>- user-server需要记忆order-server的地址，如果出现变更，可能得不到通知，地址将失效</p><p>- user-server不清楚order-server的状态，服务宕机也不知道</p><p>- order-server只有1台服务，不具备高可用性</p><p>- 即便order-server形成集群，user-server还需自己实现负载均衡</p><p>其实上面说的问题，概括一下就是分布式服务(微服务)必然要面临的问题：</p><p>- 服务管理</p><p>- 如何自动注册和发现</p><p>- 如何实现状态监管</p><p>- 服务如何实现动态路由</p><p>- 服务如何实现负载均衡</p><p>- 服务如何解决容灾问题</p><p>- 服务如何实现统一配置</p><p>以上的第1，2个问题，我们将在注册中心实现。</p><h4 id="5-1-2-常见的注册中心"><a href="#5-1-2-常见的注册中心" class="headerlink" title="5.1.2.常见的注册中心"></a>5.1.2.常见的注册中心</h4><p>由于Spring Cloud为服务治理做了一层抽象接口，所以在Spring Cloud应用中可以支持多种不同的服务注册中心，比如：Netflix Eureka、Consul、Zookeeper，alibaba Nacos。在Spring Cloud服务治理抽象层的作用下，我们可以无缝地切换服务治理实现，并且不影响任何其他的服务注册、服务发现、服务调用等逻辑。</p><p>选择Eureka</p><h4 id="5-1-3-Eureka是什么"><a href="#5-1-3-Eureka是什么" class="headerlink" title="5.1.3.Eureka是什么"></a>5.1.3.Eureka是什么</h4><p>Eureka是netflix的一个子模块，也是核心模块之一，Eureka是一个基于REST的服务，用于定位服务，以实现云端中间层服务发现和故障转移。服务注册与发现对于微服务架构来说是非常重要的，有了服务发现和注册，只需要使用服务的标识符，就可以访问到服务，而不需要修改服务，而不需要修改服务调用的配置文件了，功能类似于dubbo的注册中心，比如zookeeper。</p><h4 id="5-1-4-原理"><a href="#5-1-4-原理" class="headerlink" title="5.1.4.原理"></a>5.1.4.原理</h4><p>Eureka是一个服务注册与发现组件,简单说就是用来统一管理微服务的通信地址，它包含了EurekaServer服务端(也叫注册中心)和EurekaClient客户端两部分组成，EureakServer是独立的服务，而EurekaClient需要集成到每个微服务中。</p><p>微服务(EurekaClient)在启动的时候会向EureakServer提交自己的通信地址清单如:服务名,ip,端口，在EurekaServer会形成一个微服务的通信地址列表 — 这叫服务注册</p><table><thead><tr><th>服务名</th><th>Ip：端口</th></tr></thead><tbody><tr><td>product-service</td><td>[“Localhost:2010”,Localhost:2011]</td></tr><tr><td>order-service</td><td>Localhost:2020</td></tr></tbody></table><p>微服务(EurekaClient)会定期的从EureakServer拉取一份微服务通信地址列表缓存到本地。一个微服务在向另一个微服务发起调用的时候会根据目标服务的服务名找到其通信地址清单，然后基于HTTP协议向目标服务发起请求。—这叫服务发现</p><p>另外，微服务(EurekaClient)采用“心跳”机制向EureakServer发请求进行服务续约，其实就是定时向EureakServer发请求报告自己的健康状况，告诉EureakServer自己还活着，不要把自己从服务地址清单中掉，那么当微服务(EurekaClient)宕机未向EureakServer续约，或者续约请求超时，注册中心机会从地址清单中剔除该续约失败的服务</p><p><img src="/breeze/5a02c04f/wps17.jpg" alt="img"></p><p><img src="/breeze/5a02c04f/wps18.jpg" alt="img"></p><h3 id="5-2-Eureka注册中心搭建（Eureka）-springboot"><a href="#5-2-Eureka注册中心搭建（Eureka）-springboot" class="headerlink" title="5.2.Eureka注册中心搭建（Eureka）-springboot"></a>5.2.Eureka注册中心搭建（Eureka）-springboot</h3><h4 id="5-2-1-创建项目"><a href="#5-2-1-创建项目" class="headerlink" title="5.2.1.创建项目"></a>5.2.1.创建项目</h4><p>创建一个普通maven项目</p><p>​ eureka-server-1010</p><h4 id="5-2-2-Pom"><a href="#5-2-2-Pom" class="headerlink" title="5.2.2.Pom"></a>5.2.2.Pom</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springboot支持--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Eureka服务端支持--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-2-3-yml配置"><a href="#5-2-3-yml配置" class="headerlink" title="5.2.3.yml配置"></a>5.2.3.yml配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">1010</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">registerWithEureka:</span> <span class="literal">false</span> <span class="comment">#是否要注册到eureka</span></span><br><span class="line">    <span class="attr">fetchRegistry:</span> <span class="literal">false</span> <span class="comment">#表示是否从Eureka Server获取注册信息</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span> <span class="comment">#单机配置</span></span><br></pre></td></tr></table></figure><h4 id="5-2-4-主类"><a href="#5-2-4-主类" class="headerlink" title="5.2.4.主类"></a>5.2.4.主类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">//标识是eureka服务端</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnrekaServerApplication_7001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EnrekaServerApplication_7001.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-5-启动并测试"><a href="#5-2-5-启动并测试" class="headerlink" title="5.2.5.启动并测试"></a>5.2.5.启动并测试</h4><p>启动入库类访问localhost:1010</p><p><img src="/breeze/5a02c04f/wps19.jpg" alt="img"></p><h4 id="5-2-6-注意事项"><a href="#5-2-6-注意事项" class="headerlink" title="5.2.6. 注意事项"></a><strong>5.2.6.</strong> 注意事项</h4><p>1）自我保护引发的错误</p><p><img src="/breeze/5a02c04f/wps20.jpg" alt="img"></p><p>Eureka自我保护机制导致,不影响使用.</p><p>当微服务客户端启动后，会把自身信息注册到Eureka注册中心，以供其他微服务进行调用。一般情况下，当某个服务不可用时（一段时间内没有检测到心跳或者连接超时等），那么Eureka注册中心就会将该服务从可用服务列表中剔除，但是在微服务架构中，因为服务数量众多，可能存在跨机房或者跨区域的情况，因此当某个服务心跳探测失败并不能完全说明其无法正常提供服务而将其剔除，并且服务一旦剔除后，再重新注册将会重新进行负载均衡等等一系列的操作，考虑到性能问题，eureka会将不可用的服务暂时断开，并期望能够在接下来一段时间内接收到心跳信号，而不是直接剔除，同时，新来的请求将不会分发给暂停服务的实例，这就是eureka的保护机制，它保护了因网络等问题造成的短暂的服务不可用的实例，避免频繁注册服务对整个系统造成影响。</p><p>2）显示IP地址</p><p>问题:</p><p><img src="/breeze/5a02c04f/wps21.jpg" alt="img"></p><p>解决方案: 在客户端实现</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">     <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka</span>  <span class="comment">#告诉服务提供者要把服务注册到哪儿</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#显示客户端真实ip</span></span><br></pre></td></tr></table></figure><h3 id="5-3-服务提供者注册到Eureka"><a href="#5-3-服务提供者注册到Eureka" class="headerlink" title="5.3.服务提供者注册到Eureka"></a>5.3.服务提供者注册到Eureka</h3><h4 id="5-3-1-导入jar"><a href="#5-3-1-导入jar" class="headerlink" title="5.3.1.导入jar"></a>5.3.1.导入jar</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--eureka客户端支持 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-3-2-修改配置"><a href="#5-3-2-修改配置" class="headerlink" title="5.3.2.修改配置"></a>5.3.2.修改配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">     <span class="attr">defaultZone:</span> <span class="string">http://localhost:1010/eureka</span> <span class="comment">#告诉服务提供者要把服务注册到哪儿</span></span><br><span class="line"> <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment"># 当调用getHostname获取实例的hostname时，返回ip而不是host名称</span></span><br><span class="line">    <span class="attr">ip-address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="comment"># 指定自己的ip信息，不指定的话会自己寻找</span></span><br></pre></td></tr></table></figure><h4 id="5-3-3-启动类启用Eureka"><a href="#5-3-3-启动类启用Eureka" class="headerlink" title="5.3.3.启动类启用Eureka"></a>5.3.3.启动类启用Eureka</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//@EnableEurekaClient//这个表示开启eureka客户端,万一我的注册中心编程nacas</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">//通用性更好，以后可以切换支持主流注册中心</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProviderApplication_8001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(UserProviderApplication_8001.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-3-4-测试"><a href="#5-3-4-测试" class="headerlink" title="5.3.4.测试"></a>5.3.4.测试</h4><p>启动入库类访问localhost:7001</p><p><img src="/breeze/5a02c04f/wps22.jpg" alt="img"></p><h3 id="5-4-服务消费者从Eureka调用服务"><a href="#5-4-服务消费者从Eureka调用服务" class="headerlink" title="5.4.服务消费者从Eureka调用服务"></a>5.4.服务消费者从Eureka调用服务</h3><h4 id="5-4-1-导入jar"><a href="#5-4-1-导入jar" class="headerlink" title="5.4.1.导入jar"></a>5.4.1.导入jar</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Eureka客户端 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-2-修改配置"><a href="#5-4-2-修改配置" class="headerlink" title="5.4.2.修改配置"></a>5.4.2.修改配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">     <span class="attr">defaultZone:</span> <span class="string">http://localhost:1010/eureka</span> <span class="comment">#告诉服务提供者要把服务注册到哪儿</span></span><br><span class="line"> <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment"># 当调用getHostname获取实例的hostname时，返回ip而不是host名称</span></span><br><span class="line">    <span class="attr">ip-address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="comment"># 指定自己的ip信息，不指定的话会自己寻找</span></span><br></pre></td></tr></table></figure><h4 id="5-4-3-入口类用Eureka客户端"><a href="#5-4-3-入口类用Eureka客户端" class="headerlink" title="5.4.3.入口类用Eureka客户端"></a>5.4.3.入口类用Eureka客户端</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.ronghuanet.springcloud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserConsumerAppliction_9001</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>(<span class="keyword">new</span> <span class="title class_">OkHttp3ClientHttpRequestFactory</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(UserConsumerAppliction_9001.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-4-4-整改服务调用"><a href="#5-4-4-整改服务调用" class="headerlink" title="5.4.4.整改服务调用"></a>5.4.4.整改服务调用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DiscoveryClient discoveryClient;<span class="comment">// Eureka客户端，可以获取到服务实例信息</span></span><br><span class="line"><span class="comment">// String baseUrl = &quot;http://localhost:8081/user/&quot;;</span></span><br><span class="line"><span class="comment">// 根据服务名称，获取服务实例</span></span><br><span class="line">List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="string">&quot;user-service&quot;</span>);</span><br><span class="line"><span class="comment">// 因为只有一个UserService,因此我们直接get(0)获取</span></span><br><span class="line"><span class="type">ServiceInstance</span> <span class="variable">instance</span> <span class="operator">=</span> instances.get(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 获取ip和端口信息</span></span><br><span class="line"><span class="type">String</span> <span class="variable">baseUrl</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span>+instance.getHost() + <span class="string">&quot;:&quot;</span> + instance.getPort()+<span class="string">&quot;/user/&quot;</span>;</span><br><span class="line"><span class="built_in">this</span>.restTemplate.getForObject(baseUrl + id, User.class)</span><br></pre></td></tr></table></figure><p><font color="red">只解决写死url,但是还没有负载均衡</font></p><h4 id="5-4-5-测试"><a href="#5-4-5-测试" class="headerlink" title="5.4.5.测试"></a>5.4.5.测试</h4><p>http请求访问</p><h2 id="6-Eureka注册中心集群"><a href="#6-Eureka注册中心集群" class="headerlink" title="6.Eureka注册中心集群"></a>6.Eureka注册中心集群</h2><p>分布式：把不同的业务交给不同服务或服务器处理。举例：两个分别做不同事情。</p><p>微服务架构天生就是分布式!</p><p>集群：相同的多个服务完成同一业务。 举例：多个班长同时收作业</p><h3 id="6-1-为什么需要集群"><a href="#6-1-为什么需要集群" class="headerlink" title="6.1.为什么需要集群"></a>6.1.为什么需要集群</h3><p>如果只有一个注册中心服务器，会存在单点故障，不可以高并发处理所以要集群。</p><h3 id="6-2-怎么做"><a href="#6-2-怎么做" class="headerlink" title="6.2.怎么做"></a>6.2.怎么做</h3><p>1准备三个EurekaServer 相互注册，也就是说每个EurekaServer都需要向所有的EureakServer注册，包括自己 ，每个EurekaServer即充当了服务端，也充当了客户端。咱们的其他微服务(order,user)只需要把注册地址指向所有的EurekaServer就可以了。</p><p><img src="/breeze/5a02c04f/wps23.png" alt="img"><img src="/breeze/5a02c04f/wps24.jpg" alt="img"></p><p><img src="/breeze/5a02c04f/wps25.jpg" alt="img"></p><p>生产环境把Eureka jar包部署多个服务器就ok了,</p><p><img src="/breeze/5a02c04f/wps26.jpg" alt="img"></p><p>但是现在是开发阶段同一台主机不同端口号来代替服务器 ，</p><p><img src="/breeze/5a02c04f/wps27.jpg" alt="img"></p><p>方案也有两种。</p><p>方案1：拷贝代码为多份，修改端口不一样。分别启动</p><p><img src="/breeze/5a02c04f/wps28.jpg" alt="img"></p><p>方案2：一份代码，多份配置。 每一个配置启动一份。—springboot的多环境支持,也就是一个Eureka代码可以支持eureka1,eureka2,eureka3三套环境.一次类推,我一个项目既可以支持开发环境、测试环境、线上环境.</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yhp0607/article/details/111479029">https://blog.csdn.net/yhp0607/article/details/111479029</a></p><h4 id="6-2-1-修改配置"><a href="#6-2-1-修改配置" class="headerlink" title="6.2.1.修改配置"></a>6.2.1.修改配置</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hosts</span><br><span class="line">127.0.0.1 eureka1.com</span><br><span class="line">127.0.0.1 eureka2.com</span><br><span class="line">127.0.0.1 eureka3.com</span><br></pre></td></tr></table></figure><p><strong>application.yml</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">application.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">eureka1</span> <span class="comment">#默认启动eureka1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">application-eureka1.yml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">1010</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka1</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka1.com</span></span><br><span class="line"><span class="string">:1010/eureka,http://eureka2.com</span></span><br><span class="line"><span class="string">:1020/eureka,http://eureka3.com</span></span><br><span class="line"><span class="string">:1030/eureka</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">application-eureka2.yml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">1020</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka2</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">       <span class="attr">defaultZone:</span> <span class="string">http://eureka1.com</span></span><br><span class="line"><span class="string">:1010/eureka,http://eureka2.com</span></span><br><span class="line"><span class="string">:1020/eureka,http://eureka3.com</span></span><br><span class="line"><span class="string">:1030/eureka</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">application-eureka3.yml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">1030</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka3</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">     <span class="attr">defaultZone:</span> <span class="string">http://eureka1.com:1010/eureka,http://eureka2.com:1020/eureka,http://eureka3.com</span></span><br><span class="line"><span class="string">:1030/eureka</span></span><br></pre></td></tr></table></figure><h4 id="6-2-2-启动三份"><a href="#6-2-2-启动三份" class="headerlink" title="6.2.2.启动三份"></a>6.2.2.启动三份</h4><p><img src="/breeze/5a02c04f/wps29.jpg" alt="img"></p><p>修改</p><p>Application.yml中配置分别启动三个</p><p>使用三个地址都能访问<a href="http://eureka1.com:1010，http://eureka2.com:1020">http://eureka1.com:1010，http://eureka2.com:1020</a> ，<a target="_blank" rel="noopener" href="http://eureka3.com:1030/">http://eureka3.com:1030</a></p><h4 id="6-2-3-服务提供者和服务消费者修改"><a href="#6-2-3-服务提供者和服务消费者修改" class="headerlink" title="6.2.3.服务提供者和服务消费者修改"></a>6.2.3.服务提供者和服务消费者修改</h4><p>#defaultZone: <a target="_blank" rel="noopener" href="http://localhost:7001/eureka">http://localhost:7001/eureka</a></p><p><a target="_blank" rel="noopener" href="http://eureka1.com:1010/eureka,http://eureka2.com:1011/eureka,http://eureka3.com:1012/eureka">http://eureka1.com:1010/eureka,http://eureka2.com:1011/eureka,http://eureka3.com:1012/eureka</a></p><p><em><strong>*<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_54707282/article/details/123362629/">https://blog.csdn.net/weixin_54707282/article/details/123362629\</a>*</strong></em></p><h3 id="6-3-总结"><a href="#6-3-总结" class="headerlink" title="6.3.总结"></a>6.3.总结</h3><p>如果是只有一个Eureka注册中心,会存在单点故障,要做集群,做了集群后,服务提供者和消费者注册服务或发现服务时要配置集群(把多个Eureka都配置上).</p><h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7.总结"></a>7.总结</h2><h3 id="7-1-重点"><a href="#7-1-重点" class="headerlink" title="7.1.重点"></a>7.1.重点</h3><ol><li><p>微服务架构理解。</p></li><li><p>Springcloud入门</p></li><li><p>负载均衡</p></li></ol><h3 id="7-2-难点"><a href="#7-2-难点" class="headerlink" title="7.2.难点"></a>7.2.难点</h3><ol><li>微服务架构理解</li></ol><h2 id="8-面试题"><a href="#8-面试题" class="headerlink" title="8. 面试题"></a><strong>8.</strong> 面试题</h2><ol><li><p>简单说一下微服务架构</p></li><li><p>Dubbo和springcloud的区分</p></li><li><p>Springcloud怎么实现负载均衡</p></li></ol></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://mliutm.github.io">清风</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://mliutm.github.io/breeze/5a02c04f.html">https://mliutm.github.io/breeze/5a02c04f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://mliutm.github.io" target="_blank">清风</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springcloud/">springcloud</a><a class="post-meta__tags" href="/tags/eureka/">eureka</a></div><div class="post_share"><div class="social-share" data-image="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/breeze/f019aa2d.html" title="springcloud快速入门-负载均衡-熔断降级（二）"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">springcloud快速入门-负载均衡-熔断降级（二）</div></div></a></div><div class="next-post pull-right"><a href="/breeze/a28d47f0.html" title="Sentinel源码分析"><img class="cover" src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Sentinel源码分析</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/breeze/621a973e.html" title="SpringCloud-认识微服务（一）"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-21</div><div class="title">SpringCloud-认识微服务（一）</div></div></a></div><div><a href="/breeze/3448dc8c.html" title="springcloud快速入门-zuul-config（三）"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-23</div><div class="title">springcloud快速入门-zuul-config（三）</div></div></a></div><div><a href="/breeze/f019aa2d.html" title="springcloud快速入门-负载均衡-熔断降级（二）"><img class="cover" src="/img/photo-1692708632140-ee01624d558d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-23</div><div class="title">springcloud快速入门-负载均衡-熔断降级（二）</div></div></a></div><div><a href="/breeze/91a9f79c.html" title="springcloud快速入门-链路追踪-ELK（四）"><img class="cover" src="/img/photo-1688475747590-d0db5e2412cb.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-23</div><div class="title">springcloud快速入门-链路追踪-ELK（四）</div></div></a></div><div><a href="/breeze/7043968f.html" title="Nacos源码分析"><img class="cover" src="/img/photo-1653549892896-dde02867edee.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-21</div><div class="title">Nacos源码分析</div></div></a></div><div><a href="/breeze/a28d47f0.html" title="Sentinel源码分析"><img class="cover" src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-21</div><div class="title">Sentinel源码分析</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">清风</div><div class="author-info__description">清风洒六合，邈然不可攀</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">169</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:huangpan0805@163.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81spring-cloud"><span class="toc-text">2.为什么需要spring cloud</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Monolith%EF%BC%88%E5%8D%95%E4%BD%93%E5%BA%94%E7%94%A8%EF%BC%89%E6%9E%B6%E6%9E%84"><span class="toc-text">2.1.Monolith（单体应用）架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E4%BD%93%E5%BA%94%E7%94%A8"><span class="toc-text">2.1.1. *什么是单体应用*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E7%BC%BA%E7%82%B9"><span class="toc-text">2.1.2. *缺点*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-MicroService-%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E6%9E%B6%E6%9E%84"><span class="toc-text">2.2. MicroService(微服务)架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81"><span class="toc-text">2.2.1. 为什么需要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E4%BB%80%E4%B9%88%E6%98%AFMicroService%E6%9E%B6%E6%9E%84"><span class="toc-text">2.2.2.什么是MicroService架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E4%BC%98%E5%8A%BF"><span class="toc-text">2.2.3.优势</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%97%B4%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">2.2.4. 微服务间远程调用方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-1%E8%AE%A4%E8%AF%86RPC"><span class="toc-text">2.2.4.1认识RPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-2-%E8%AE%A4%E8%AF%86Http"><span class="toc-text">2.2.4.2.认识Http</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-3%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9"><span class="toc-text">2.2.4.3如何选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-4Http%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E5%85%B7"><span class="toc-text">2.2.4.4Http客户端工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Monolith%C2%B5Srvice%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">2.3.MonolithµSrvice使用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E9%80%89%E6%8B%A9%E4%BE%9D%E6%8D%AE"><span class="toc-text">2.3.1.*选择依据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E9%80%89%E5%9E%8B"><span class="toc-text">2.3.2.选型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-MicroService%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88"><span class="toc-text">2.4.MicroService实现技术方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-MicroService%E5%8F%AA%E6%98%AF%E4%B8%80%E7%A7%8D%E6%9E%B6%E6%9E%84%E6%80%9D%E6%83%B3"><span class="toc-text">2.4.1.MicroService只是一种架构思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF-springboot"><span class="toc-text">2.4.2.实现技术-springboot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6"><span class="toc-text">2.4.3.服务治理框架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%B0%8F%E7%BB%93"><span class="toc-text">2.5.小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Spring-cloud-netflix%E6%A6%82%E8%BF%B0"><span class="toc-text">3.Spring cloud netflix概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">3.1.是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-text">3.2.组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Spring-cloud-pk-dubbo"><span class="toc-text">3.3.Spring cloud pk dubbo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%80%BB%E7%BB%93"><span class="toc-text">3.4.总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%9C%BA%E6%99%AF%E6%A8%A1%E6%8B%9F-%E5%85%A5%E9%97%A8"><span class="toc-text">4.微服务场景模拟-入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%BC%95%E5%85%A5"><span class="toc-text">4.1.引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-text">4.2.搭建环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-Idea%E5%88%9B%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE"><span class="toc-text">4.2.1.Idea创建springboot项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"><span class="toc-text">4.2.2.结构分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E6%90%AD%E5%BB%BA%E7%88%B6%E6%A8%A1%E5%9D%97"><span class="toc-text">4.2.3.搭建父模块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85"><span class="toc-text">4.3.服务提供者</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"><span class="toc-text">4.3.1.工程搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E5%AF%BC%E5%85%A5jar"><span class="toc-text">4.3.2.导入jar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-Yml%E9%85%8D%E7%BD%AE"><span class="toc-text">4.3.3.Yml配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-4-%E5%85%A5%E5%8F%A3%E7%B1%BB"><span class="toc-text">4.3.4.入口类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-5-%E5%86%99%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%A0%81"><span class="toc-text">4.3.5.写服务代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-6-%E6%B5%8B%E8%AF%95"><span class="toc-text">4.3.6.测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85"><span class="toc-text">4.4.服务消费者</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">4.4.1.创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E5%AF%BC%E5%85%A5jar"><span class="toc-text">4.4.2.导入jar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-%E9%85%8D%E7%BD%AEyml"><span class="toc-text">4.4.3.配置yml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-4-%E5%85%A5%E5%8F%A3%E7%B1%BB"><span class="toc-text">4.4.4.入口类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-5-%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3"><span class="toc-text">4.4.5.调用接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-6-%E6%B5%8B%E8%AF%95"><span class="toc-text">4.4.6.测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E6%80%BB%E7%BB%93"><span class="toc-text">4.5. 总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83-%E5%85%A5%E9%97%A8"><span class="toc-text">5. Eureka注册中心-入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">5.1. 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E9%9C%80%E8%A6%81%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-text">5.1.1.为什么需要需要服务注册中心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E5%B8%B8%E8%A7%81%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-text">5.1.2.常见的注册中心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-Eureka%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">5.1.3.Eureka是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4-%E5%8E%9F%E7%90%86"><span class="toc-text">5.1.4.原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%90%AD%E5%BB%BA%EF%BC%88Eureka%EF%BC%89-springboot"><span class="toc-text">5.2.Eureka注册中心搭建（Eureka）-springboot</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">5.2.1.创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-Pom"><span class="toc-text">5.2.2.Pom</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-yml%E9%85%8D%E7%BD%AE"><span class="toc-text">5.2.3.yml配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-%E4%B8%BB%E7%B1%BB"><span class="toc-text">5.2.4.主类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-5-%E5%90%AF%E5%8A%A8%E5%B9%B6%E6%B5%8B%E8%AF%95"><span class="toc-text">5.2.5.启动并测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-6-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">5.2.6. 注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E6%B3%A8%E5%86%8C%E5%88%B0Eureka"><span class="toc-text">5.3.服务提供者注册到Eureka</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-%E5%AF%BC%E5%85%A5jar"><span class="toc-text">5.3.1.导入jar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="toc-text">5.3.2.修改配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%90%AF%E7%94%A8Eureka"><span class="toc-text">5.3.3.启动类启用Eureka</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-4-%E6%B5%8B%E8%AF%95"><span class="toc-text">5.3.4.测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E4%BB%8EEureka%E8%B0%83%E7%94%A8%E6%9C%8D%E5%8A%A1"><span class="toc-text">5.4.服务消费者从Eureka调用服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-1-%E5%AF%BC%E5%85%A5jar"><span class="toc-text">5.4.1.导入jar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-2-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="toc-text">5.4.2.修改配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-3-%E5%85%A5%E5%8F%A3%E7%B1%BB%E7%94%A8Eureka%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">5.4.3.入口类用Eureka客户端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-4-%E6%95%B4%E6%94%B9%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8"><span class="toc-text">5.4.4.整改服务调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-5-%E6%B5%8B%E8%AF%95"><span class="toc-text">5.4.5.测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E9%9B%86%E7%BE%A4"><span class="toc-text">6.Eureka注册中心集群</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E9%9B%86%E7%BE%A4"><span class="toc-text">6.1.为什么需要集群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E6%80%8E%E4%B9%88%E5%81%9A"><span class="toc-text">6.2.怎么做</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="toc-text">6.2.1.修改配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2-%E5%90%AF%E5%8A%A8%E4%B8%89%E4%BB%BD"><span class="toc-text">6.2.2.启动三份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%92%8C%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E4%BF%AE%E6%94%B9"><span class="toc-text">6.2.3.服务提供者和服务消费者修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%80%BB%E7%BB%93"><span class="toc-text">6.3.总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%80%BB%E7%BB%93"><span class="toc-text">7.总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E9%87%8D%E7%82%B9"><span class="toc-text">7.1.重点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E9%9A%BE%E7%82%B9"><span class="toc-text">7.2.难点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">8. 面试题</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/breeze/1d13ce0d.html" title="WYDG-产品目录列表-20200506"><img src="/img/photo-1653549892896-dde02867edee.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="WYDG-产品目录列表-20200506"></a><div class="content"><a class="title" href="/breeze/1d13ce0d.html" title="WYDG-产品目录列表-20200506">WYDG-产品目录列表-20200506</a><time datetime="2025-04-13T05:43:05.000Z" title="发表于 2025-04-13 13:43:05">2025-04-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/6f268337.html" title="雨雀文件下载"><img src="/img/premium_photo-1695185954894-e9382c6f4da8.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="雨雀文件下载"></a><div class="content"><a class="title" href="/breeze/6f268337.html" title="雨雀文件下载">雨雀文件下载</a><time datetime="2024-05-22T12:25:08.000Z" title="发表于 2024-05-22 20:25:08">2024-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/7832219d.html" title="十万字面试总结"><img src="/img/photo-1692708632140-ee01624d558d.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="十万字面试总结"></a><div class="content"><a class="title" href="/breeze/7832219d.html" title="十万字面试总结">十万字面试总结</a><time datetime="2024-02-29T02:50:00.000Z" title="发表于 2024-02-29 10:50:00">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/7ae0ca37.html" title="Redis_30道经典面试题"><img src="/img/photo-1653549892896-dde02867edee.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis_30道经典面试题"></a><div class="content"><a class="title" href="/breeze/7ae0ca37.html" title="Redis_30道经典面试题">Redis_30道经典面试题</a><time datetime="2024-02-29T02:45:00.000Z" title="发表于 2024-02-29 10:45:00">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/breeze/2a548e97.html" title="面试实战"><img src="/img/photo-1653549892896-dde02867edee.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="面试实战"></a><div class="content"><a class="title" href="/breeze/2a548e97.html" title="面试实战">面试实战</a><time datetime="2024-02-29T02:43:59.000Z" title="发表于 2024-02-29 10:43:59">2024-02-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/premium_photo-1695185954894-e9382c6f4da8.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 <i id="heartbeat" class="fa fas fa-heartbeat"></i> 清风</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="/js/timing.js"></script><script id="canvas_nest" defer color="255,0,255" opacity="0.7" zindex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="天枢,天璇,天玑,天权,玉衡,开阳,瑶光" data-fontsize="15px" data-random="true" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>